# add - only adds the layer if it does not exist in the dxf file
# update - updates the layer if it exists in the dxf file
# folderPrefix: "~/IONOS HiDrive"
folderPrefix: "~/hidrive"
projects:
  - name: Friedrichshof
    exportFormat: dxf
    dxfVersion: R2018
    crs: EPSG:25833
    dxfFilename: "Öffentlich Planungsbüro Schulz/Projekte/22-16 Maxsolar - Friedrichshof/Zeichnung/24 09.25 Friedrichshof  Zeichnung -2.dxf"
    # dxfFilename: "Öffentlich Planungsbüro Schulz/Projekte/22-16 Maxsolar - Friedrichshof/Zeichnung/test.dxf"
    dumpOutputDir: "Öffentlich Planungsbüro Schulz/Projekte/22-16 Maxsolar - Friedrichshof/GIS/dxf_dump"
    dxfLayers:
      - name: Geltungsbereich
        update: false
        shapeFile: "Öffentlich Planungsbüro Schulz/Projekte/22-16 Maxsolar - Friedrichshof/GIS/geltungsbereich.shp"
      - name: WasserBodenVerband
        update: false
        style:
          color: "Light Blue"
        shapeFile: "Öffentlich Planungsbüro Schulz/Projekte/22-16 Maxsolar - Friedrichshof/Grundlagen/wasser_bodeverband/5LV11_PVA-Fhof.shp"
      - name: WBVGrünfläche
        update: false
        operations:
          - type: buffer
            layers:
              - WasserBodenVerband
            distance: 7
      - name: Externer Ausgleich
        update: false
        style:
          color: "Light Blue"
        shapeFile: "Öffentlich Planungsbüro Schulz/Projekte/22-16 Maxsolar - Friedrichshof/GIS/Lagefaktor_var1/compensatory/Ausgleich_Acker/Ausgleich.shp"
      # - name: Contour
      #   update: false
      #   style:
      #     color: Black
      #     locked: false
      #   update: false
      #   label: elevation
      #   operations:
      #     - type: contour
      #       url: "https://www.geodaten-mv.de/dienste/dgm_atom?type=dataset&id=df758744-b2a1-4d39-b34c-9ec5bf9b4372"
      #       layers:
      #         - Geltungsbereich
      #       buffer: 1000
      #   outputShapeFile: "Öffentlich Planungsbüro Schulz/Projekte/22-16 Maxsolar - Friedrichshof/GIS/generated/contour.shp"
      - name: WMS Gebäude
        update: true
        operations:
          - type: wms
            url: "https://www.geodaten-mv.de/dienste/gebaeude_wms"
            layer: "gebaeude"
            srs: "EPSG:25833"
            format: "image/png"
            targetFolder: "Öffentlich Planungsbüro Schulz/Projekte/22-16 Maxsolar - Friedrichshof/GIS/Gebäude"
            layers:
              - Geltungsbereich
            buffer: 600
            zoom: 18
            overwrite: true
            postProcess:
                colorMap:
                  "#ff0000": "#808080"  # Map red to grey
                alphaColor: "#ffffff"  # Set white to fully transparent
                # tolerance: 30  # Increased tolerance to catch similar shades
                grayscale: true
                # removeText: true
      # - name: WMS Höhenlinien
      #   update: true
      #   operations:
      #     - type: wms
      #       url: "https://www.geodaten-mv.de/dienste/dgm_wms"
      #       layer: "hohenlinien"
      #       srs: "EPSG:25833"
      #       format: "image/png"
      #       targetFolder: "Öffentlich Planungsbüro Schulz/Projekte/22-16 Maxsolar - Friedrichshof/GIS/Höhenlinien"
      #       layers:
      #         - Geltungsbereich
      #       buffer: 600
      #       zoom: 0 # Zoom doesnt work (only for this layer?)
      #       overwrite: true
      #       postProcess:
      #         alphaColor: "#ffffff"  # Set white to fully transparent
      #         removeText: true
  - name: Plasten
    exportFormat: dxf
    dxfVersion: R2018
    crs: EPSG:25833
    dxfFilename: "Öffentlich Planungsbüro Schulz/Projekte/23-24 Maxsolar - Plasten/Zeichnung/Plasten.dxf"
    dumpOutputDir: "Öffentlich Planungsbüro Schulz/Projekte/23-24 Maxsolar - Plasten//GIS/dxf_dump"
    dxfLayers:
      - name: Flur
        update: true
        shapeFile: "Öffentlich Planungsbüro Schulz/Projekte/23-24 Maxsolar - Plasten/GIS/input/flur.shp"
        label: flurname
        close: true
        style:
          color: Cyan
          linetype: Continuous
          # lineweight: 13
          locked: true
          frozen: false
          is_on: true
          vp_freeze: false
          transparency: 0.0
      - name: Parcel
        update: true
        shapeFile: "Öffentlich Planungsbüro Schulz/Projekte/23-24 Maxsolar - Plasten/GIS/input/parcel.shp"
        label: label
        close: true
        style:
          color: Black
          locked: true
          linetype: ACAD_ISO11W100
          # lineweight: 30
          plot: true
          frozen: false
          is_on: true 
          vp_freeze: false
          transparency: 0.0
      - name: Gemarkung
        update: true
        shapeFile: "Öffentlich Planungsbüro Schulz/Projekte/23-24 Maxsolar - Plasten/GIS/input/gemarkung.shp"
        label: gmkname
        close: true
        style:
          color: "Medium Orange Red"
          locked: true
          linetype: Continuous
          # lineweight: 13
          plot: true
          frozen: false
          is_on: true
          vp_freeze: false
          transparency: 0.0
        labelStyle:
          color: "Green"
      - name: Gemeinde
        update: true
        shapeFile: "Öffentlich Planungsbüro Schulz/Projekte/23-24 Maxsolar - Plasten/GIS/input/gemeinde.shp"
        label: gen
        close: true
        style:
          color: "Dark Red"
          locked: true
          linetype: Continuous
          # lineweight: 13
          plot: true
          frozen: false
          is_on: true
          vp_freeze: false
          transparency: 0.0
      - name: Grünfläche Input 1
        update: false
        shapeFile: "Öffentlich Planungsbüro Schulz/Projekte/23-24 Maxsolar - Plasten/GIS/input/geltungsbereich_abstand.shp"
        close: true
        style:
          color: "Light Green"
      - name: Wald
        update: true
        shapeFile: "Öffentlich Planungsbüro Schulz/Projekte/23-24 Maxsolar - Plasten/GIS/input/wald.shp"
        close: true
        style:
          color: "Dark Green"
        operations:
          - type: merge
      - name: Biotope Input 1
        update: false
        shapeFile: "Öffentlich Planungsbüro Schulz/Projekte/23-24 Maxsolar - Plasten/GIS/input/biotope.shp"
        close: true
        style:
          color: "Green"
      - name: Exclude
        update: false
        close: true
        style:
          color: "Red"
          locked: false
        shapeFile: "Öffentlich Planungsbüro Schulz/Projekte/23-24 Maxsolar - Plasten/GIS/input/exclude.shp"
      - name: Baumabstand
        update: false
        shapeFile: "Öffentlich Planungsbüro Schulz/Projekte/23-24 Maxsolar - Plasten/GIS/input/baum_abstand.shp"
        close: true
        style:
          color: "Dark Green"
        operations:
          - type: buffer
            distance: 5
            joinStyle: round
        outputShapeFile: "Öffentlich Planungsbüro Schulz/Projekte/23-24 Maxsolar - Plasten/GIS/generated/baumabstand.shp"
      # - name: Baumabstand Puffer
      #   update: true
      #   close: true
      #   style:
      #     color: "Dark Green"
      #   operations:
      #     - type: buffer
      #       layers:
      #         - Baumabstand
      #       distance: 10      
      #   outputShapeFile: "Öffentlich Planungsbüro Schulz/Projekte/23-24 Maxsolar - Plasten/GIS/generated/baumabstand_puffer.shp"      
      - name: Geschütze Biotope
        update: true
        close: true
        style:
          color: "Light Orange"
          linetype: CONTINUOUS
        shapeFile: "Öffentlich Planungsbüro Schulz/Projekte/23-24 Maxsolar - Plasten/GIS/input/gesch_biotope.shp"
      - name: FG Buffer
        update: true
        style:
          color: "Light Blue"
        operations:
          - type: buffer
            distance: 5
        shapeFile: "Öffentlich Planungsbüro Schulz/Projekte/23-24 Maxsolar - Plasten/GIS/input/FG.shp"
        outputShapeFile: "Öffentlich Planungsbüro Schulz/Projekte/23-24 Maxsolar - Plasten/GIS/generated/fg.shp"
      - name: Geltungsbereich NW
        update: true
        close: true
        style:
          color: "Red"
        operations:
          - type: copy
            layers:
              - name: Parcel
                values:
                  - "1"
                  - "2"
                  - "4"
                  - "6"
                  - "7"
                  - "14"
          - type: filter
            layers:
              - name: Flur
                values:
                  - "Flur 1"
              - name: Gemarkung
                values:
                  - "Groß Plasten"
              - name: Gemeinde
                values:
                  - "Groß Plasten"
          - type: difference
            layers:
              - Wald
              - Baumabstand
              - Exclude
        outputShapeFile: "Öffentlich Planungsbüro Schulz/Projekte/23-24 Maxsolar - Plasten/GIS/generated/geltungsbereich_1.shp"
      - name: Geltungsbereich NW 2
        update: true
        close: true
        linetypeScale: 1
        linetypeGeneration: true
        style:
          color: "Dark Gray"
          linetype: ACAD_ISO02W100
          lineweight: 158
        operations:
          - type: buffer
            layers:
              - name: Geltungsbereich NW
            distance: 2
      - name: Geltungsbereich NO
        update: true
        style:
          color: "Red"
          locked: false
        close: true
        operations:
          - type: copy
            layers:
              - name: Parcel
                values:
                  - "24/8"
                  - "24/9"
          - type: filter
            layers:
              - name: Flur
                values:
                  - "Flur 1"
              - name: Gemarkung
                values:
                  - "Groß Plasten"
              - name: Gemeinde
                values:
                  - "Groß Plasten"
          - type: difference
            layers:
              - Wald
              - Baumabstand
              - Exclude
        outputShapeFile: "Öffentlich Planungsbüro Schulz/Projekte/23-24 Maxsolar - Plasten/GIS/generated/geltungsbereich_2.shp"
      - name: Geltungsbereich S
        update: true
        style:
          color: "Red"
          locked: false
        close: true
        operations:
          - type: copy
            layers:
              - name: Parcel
                values:
                  - "41/1"
          - type: filter
            layers:
              - name: Flur
                values:
                  - "Flur 2"
              - name: Gemarkung
                values:
                  - "Klein Plasten"
              - name: Gemeinde
                values:
                  - "Groß Plasten"
          - type: difference
            layers:
              - Wald
              - Baumabstand
              - Exclude
        outputShapeFile: "Öffentlich Planungsbüro Schulz/Projekte/23-24 Maxsolar - Plasten/GIS/generated/geltungsbereich_3.shp"
      - name: Waldabstand
        update: true
        style:
          color: "Dark Green"
        close: true
        operations:
          - type: buffer
            layers:
              - Wald
            distance: 30
          - type: intersection
            layers:
              - Geltungsbereich NW
              - Geltungsbereich NO
              - Geltungsbereich S
        outputShapeFile: "Öffentlich Planungsbüro Schulz/Projekte/23-24 Maxsolar - Plasten/GIS/generated/waldabstand.shp"
      - name: Biotope
        update: true
        style:
          color: "Light Green"
        close: true
        operations:
          - type: buffer
            layers:
              - Biotope Input 1
              - Geschütze Biotope
            distance: 10
          - type: buffer
            mode: keep
            layers:
              - Biotope Input 1
              - Geschütze Biotope
            distance: 5
          - type: intersection
            layers:
              - Geltungsbereich NW
              - Geltungsbereich NO
              - Geltungsbereich S
        outputShapeFile: "Öffentlich Planungsbüro Schulz/Projekte/23-24 Maxsolar - Plasten/GIS/generated/biotope.shp"
      - name: Grünfläche
        update: true
        style:
          color: "Light Green"
        close: true
        operations:
          - type: copy
            layers:
              - Grünfläche Input 1
              - Waldabstand
              - Baumabstand
              - FG Buffer
          # - type: difference
          #   layers:
          #     - Weg Abstand
          - type: intersection
            layers:
              - Geltungsbereich NW
              - Geltungsbereich NO
              - Geltungsbereich S
        outputShapeFile: "Öffentlich Planungsbüro Schulz/Projekte/23-24 Maxsolar - Plasten/GIS/generated/grünfläche.shp"
      - name: Baufeld
        update: true
        style:
          color: "Light Red"
        close: true
        operations:
          - type: copy
            layers:
              - Geltungsbereich NW
              - Geltungsbereich NO
              - Geltungsbereich S
          - type: difference
            layers:
              - Grünfläche
              - Baumabstand
              - Biotope
              - FG Buffer
          # - type: smooth
          #   strength: 1.5
        outputShapeFile: "Öffentlich Planungsbüro Schulz/Projekte/23-24 Maxsolar - Plasten/GIS/generated/baufeld_smoothed.shp"
      - name: WMTS DOP
        update: false
        style:
          locked: true
          color: "White"
        operations:
          - type: wmts
            url: "https://www.geodaten-mv.de/dienste/dop_wmts/wmts/1.0.0/WMTSCapabilities.xml"
            layer: "mv_dop"
            # zoom: "10"
            proj: "ETRS89UTM33"
            targetFolder: "Öffentlich Planungsbüro Schulz/Projekte/23-24 Maxsolar - Plasten/GIS/DOP"
            layers:
              - Geltungsbereich NW
              - Geltungsbereich NO
              - Geltungsbereich S
            buffer: 200
            stitchTiles: true
            # overwrite: true
      # - name: WMTS Basemap
      #   update: true
      #   color: Black
      #   locked: true
      #   operations:
      #     - type: wmts
      #       url: "https://sgx.geodatenzentrum.de/wmts_basemapde/1.0.0/WMTSCapabilities.xml"
      #       layer: "de_basemapde_web_raster_farbe"
      #       zoom: "10"
      #       proj: "DE_EPSG_25833_ADV"
      #       targetFolder: "Öffentlich Planungsbüro Schulz/Projekte/23-24 Maxsolar - Plasten/GIS/Basemap"
      #       layers:
      #         - Geltungsbereich NW
      #         - Geltungsbereich NO
      #         - Geltungsbereich S
      #       buffer: 200
      # - name: Contour
      #   update: true
      #   style:
      #     color: Black
      #     locked: false
      #   label: elevation
      #   operations:
      #     - type: contour
      #       url: "https://www.geodaten-mv.de/dienste/dgm_atom?type=dataset&id=df758744-b2a1-4d39-b34c-9ec5bf9b4372"
      #       layers:
      #         - Geltungsbereich NW
      #       buffer: 1000
      #   outputShapeFile: "Öffentlich Planungsbüro Schulz/Projekte/23-24 Maxsolar - Plasten/GIS/generated/contour.shp"
      # - name: WMS Gebäude
      #   update: true
      #   operations:
      #     - type: wms
      #       url: "https://www.geodaten-mv.de/dienste/gebaeude_wms"
      #       layer: "gebaeude"
      #       srs: "EPSG:25833"
      #       format: "image/png"
      #       targetFolder: "Öffentlich Planungsbüro Schulz/Projekte/23-24 Maxsolar - Plasten/GIS/Gebäude"
      #       layers:
      #         - Geltungsbereich NW
      #         - Geltungsbereich NO
      #         - Geltungsbereich S
      #       buffer: 100
      #       zoom: 10
      #       # overwrite: true
      #       postProcess:
      #           colorMap:
      #             "#ff0000": "#808080"  # Map red to grey
      #           alphaColor: "#ffffff"  # Set white to fully transparent
      #           # tolerance: 30  # Increased tolerance to catch similar shades
      #           grayscale: true
      #           # removeText: true
      #       stitchTiles: true
  - name: Torgelow
    exportFormat: dxf
    dxfVersion: R2018
    crs: EPSG:25833
    dxfFilename: "Öffentlich Planungsbüro Schulz/Projekte/23-25 Maxsolar - Torgelow/Zeichnung/torgelow.dxf"
    dxfLayers:
      - name: Flur
        update: true
        add: true
        shapeFile: "Öffentlich Planungsbüro Schulz/Projekte/23-25 Maxsolar - Torgelow/GIS/flur2.shp"
        label: "flurname"
        linetype: Continuous
        lineweight: 13
        plot: false
        locked: true
        frozen: false
        is_on: true
        vp_freeze: false
        transparency: 0.0
      - name: Parcel
        update: true
        add: true
        shapeFile: "Öffentlich Planungsbüro Schulz/Projekte/23-25 Maxsolar - Torgelow/GIS/parcel2.shp"
        label: label
        color: White
        linetype: ACAD_ISO11W100
        lineweight: 30
        plot: true
        frozen: false
        is_on: true 
        vp_freeze: false
        transparency: 0.0
        locked: true
        close: true
      - name: Gemarkung
        update: true
        add: true
        shapeFile: "Öffentlich Planungsbüro Schulz/Projekte/23-25 Maxsolar - Torgelow/GIS/gemarkung2.shp"
        label: gmkname
        color: White
        linetype: Continuous
        lineweight: 13
        plot: false
        locked: false
        frozen: false
        is_on: true
        vp_freeze: false
        transparency: 0.0
      - name: Gemeinde
        update: true
        add: true
        shapeFile: "Öffentlich Planungsbüro Schulz/Projekte/23-25 Maxsolar - Torgelow/GIS/gemeinde2.shp"
        label: gen
        color: White
        linetype: Continuous
        lineweight: 13
        plot: false
        locked: false
        frozen: false
        is_on: true
        vp_freeze: false
        transparency: 0.0
      - name: Wald
        update: true
        add: true
        shapeFile: "Öffentlich Planungsbüro Schulz/Projekte/23-25 Maxsolar - Torgelow/GIS/wald.shp"
        label: waldname
        color: Dark Green
        linetype: Continuous
        lineweight: 13
        plot: true
        locked: false
        frozen: false
        is_on: true
        vp_freeze: false
        transparency: 0.0
        close: true
      # - name: Biotope
      #   add: true
      #   shapeFile: "Öffentlich Planungsbüro Schulz/Projekte/23-25 Maxsolar - Torgelow/GIS/biotope.shp"
      #   label: biotopn
      #   color: "Green"
      #   close: true
      #   locked: false
      - name: Straße
        update: true
        shapeFile: "Öffentlich Planungsbüro Schulz/Projekte/23-25 Maxsolar - Torgelow/GIS/abstand.shp"
      # - name: Biotope Puffer
      #   color: "Light Green"
      #   close: true
      #   locked: false
      #   add: true
      #   operations:
      #     - type: buffer
      #       layers:
      #         - Biotope
      #       distance: 5
      #     - type: intersection
      #       layers:
      #         - Geltungsbereich
      - name: Straße Abstand
        update: true # I think this is optional, if that layer does not already exists in the dxf file, but it cant hurt and makes sure that it updates
        operations:
          - type: buffer
            layers: 
              - Straße
            distance: 7
      # - name: Flur Offset
      #   update: true
      #   color: "Light Green"
      #   close: false
      #   locked: false
      #   add: true
      #   operations:
      #     - type: buffer
      #       layers:
      #         - Flur
      #       distance: 10
      - name: Weg
        update: true
        shapeFile: "Öffentlich Planungsbüro Schulz/Projekte/23-25 Maxsolar - Torgelow/GIS/weg.shp"
      - name: Weg Abstand
        update: true
        operations:
          # - type: buffer
          #   layers:
          #     - Weg
          #   distance: 1
          - type: copy
            layers:
              - Weg
      - name: Geltungsbereich
        update: true
        color: "Red"
        locked: false
        close: false
        add: true
        operations:
          - type: copy
            layers:
              - name: Parcel
                values:
                  - "81"
                  - "87/1"
                  - "89"
                  - "95"
                  - "96"
                  - "97"
                  - "99"
                  - "100"
                  - "101"
                  - "102"
                  - "103"
                  - "104"
          - type: filter
            layers:
              - name: Flur
                values:
                  - Flur 2
              - name: Gemarkung
                values:
                  - Torgelow am See
              - name: Gemeinde
                values:
                  - Torgelow am See
          - type: difference
            layers:
              - Wald
              - Straße Abstand
              - Weg Abstand
        outputShapeFile: "Öffentlich Planungsbüro Schulz/Projekte/23-25 Maxsolar - Torgelow/GIS/generated/geltungsbereich.shp"
      - name: Wald Abstand
        update: true
        color: "Light Green"
        close: true
        locked: false
        # add: true
        operations:
          - type: buffer
            layers:
              - Wald
            distance: 30
          - type: intersection
            layers:
              - Geltungsbereich
      - name: Grünflächeinput
        update: true
        shapeFile: "Öffentlich Planungsbüro Schulz/Projekte/23-25 Maxsolar - Torgelow/GIS/grünfläche.shp"
      - name: Temp Grünfl
        update: true
        operations:
          - type: filter
            layers:
              - name: Parcel
                values:
                  - "97"
                  - "99"
                  - "100"
                  - "101"
                  - "102"
                  # - "103"
              - name: Flur
                values:
                  - Flur 2
              - name: Gemarkung
                values:
                  - Torgelow am See
              - name: Gemeinde
                values:
                  - Torgelow am See
      - name: Grünfläche
        update: true
        color: "Light Green"
        close: true
        locked: false
        add: true
        operations:
          - type: merge
            layers:
              - Grünflächeinput
              - Temp Grünfl
              - Wald Abstand
          - type: difference
            layers:
              - Weg Abstand
          - type: intersection
            layers:
              - Geltungsbereich
          - type: buffer
            distance: -5
            mode: keep # Keeps both the original geometries and the buffered ones
        outputShapeFile: "Öffentlich Planungsbüro Schulz/Projekte/23-25 Maxsolar - Torgelow/GIS/generated/grünfläche.shp"
      - name: Baufeld
        update: true
        color: "Light Red"
        locked: false
        close: true
        textColor: "White"
        add: true
        operations:
          - type: copy
            layers:
              - Geltungsbereich
          # - type: difference
          #   layers:
          #     - Biotope
          #     - Wald Abstand
          #     - Grünfläche
        outputShapeFile: "Öffentlich Planungsbüro Schulz/Projekte/23-25 Maxsolar - Torgelow/GIS/generated/baufeld.shp"
      - name: Baugrenze
        update: true
        color: "Blue"
        locked: false
        close: true
        add: true
        operations:
          - type: buffer
            layers:
              - Baufeld
            distance: -3
        outputShapeFile: "Öffentlich Planungsbüro Schulz/Projekte/23-25 Maxsolar - Torgelow/GIS/generated/baugrenze.shp"
      - name: WMTS DOP
        # update: true
        color: Black
        locked: true
        add: true
        operations:
          - type: wmts
            url: "https://www.geodaten-mv.de/dienste/dop_wmts/wmts/1.0.0/WMTSCapabilities.xml"
            layer: "mv_dop"
            zoom: "10"
            proj: "ETRS89UTM33"
            targetFolder: "Öffentlich Planungsbüro Schulz/Projekte/23-25 Maxsolar - Torgelow/GIS/DOP"
            layers:
              - Geltungsbereich
            buffer: 100
      - name: WMTS Basemap
        # update: true
        color: Black
        locked: true
        add: true
        operations:
          - type: wmts
            url: "https://sgx.geodatenzentrum.de/wmts_basemapde/1.0.0/WMTSCapabilities.xml"
            layer: "de_basemapde_web_raster_farbe"
            zoom: "10"
            proj: "DE_EPSG_25833_ADV"
            targetFolder: "Öffentlich Planungsbüro Schulz/Projekte/23-25 Maxsolar - Torgelow/GIS/Basemap"
            layers:
              - Geltungsbereich
            buffer: 200
