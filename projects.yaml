# add - only adds the layer if it does not exist in the dxf file
# update - updates the layer if it exists in the dxf file
# folderPrefix: "~/IONOS HiDrive"
folderPrefix: "~/hidrive"
projects:
  - name: Friedrichshof
    exportFormat: dxf
    dxfVersion: R2018
    crs: EPSG:25833
    dxfFilename: "Öffentlich Planungsbüro Schulz/Projekte/22-16 Maxsolar - Friedrichshof/Zeichnung/24 09.25 Friedrichshof  Zeichnung -2.dxf"
    # dxfFilename: "Öffentlich Planungsbüro Schulz/Projekte/22-16 Maxsolar - Friedrichshof/Zeichnung/test.dxf"
    dumpOutputDir: "Öffentlich Planungsbüro Schulz/Projekte/22-16 Maxsolar - Friedrichshof/GIS/dxf_dump"
    geomLayers:
      - name: Geltungsbereich
        update: false
        shapeFile: "Öffentlich Planungsbüro Schulz/Projekte/22-16 Maxsolar - Friedrichshof/GIS/geltungsbereich.shp"
      - name: WasserBodenVerband
        update: false
        style:
          color: "Light Blue"
        shapeFile: "Öffentlich Planungsbüro Schulz/Projekte/22-16 Maxsolar - Friedrichshof/Grundlagen/wasser_bodeverband/5LV11_PVA-Fhof.shp"
      - name: WBVGrünfläche
        update: false
        operations:
          - type: buffer
            layers:
              - WasserBodenVerband
            distance: 7
      - name: Externer Ausgleich
        update: false
        style:
          color: "Light Blue"
        shapeFile: "Öffentlich Planungsbüro Schulz/Projekte/22-16 Maxsolar - Friedrichshof/GIS/Lagefaktor_var1/compensatory/Ausgleich_Acker/Ausgleich.shp"
      # - name: Contour
      #   update: false
      #   style:
      #     color: white
      #     locked: false
      #   update: false
      #   label: elevation
      #   operations:
      #     - type: contour
      #       url: "https://www.geodaten-mv.de/dienste/dgm_atom?type=dataset&id=df758744-b2a1-4d39-b34c-9ec5bf9b4372"
      #       layers:
      #         - Geltungsbereich
      #       buffer: 1000
      - name: WMS Gebäude
        update: true
        operations:
          - type: wms
            url: "https://www.geodaten-mv.de/dienste/gebäude_wms"
            layer: "gebäude"
            srs: "EPSG:25833"
            format: "image/png"
            targetFolder: "Öffentlich Planungsbüro Schulz/Projekte/22-16 Maxsolar - Friedrichshof/GIS/Gebäude"
            layers:
              - Geltungsbereich
            buffer: 600
            zoom: 18
            overwrite: true
            postProcess:
                colorMap:
                  "#ff0000": "#808080"  # Map red to grey
                alphaColor: "#ffffff"  # Set white to fully transparent
                # tolerance: 30  # Increased tolerance to catch similar shades
                grayscale: true
                # removeText: true
      # - name: WMS Höhenlinien
      #   update: true
      #   operations:
      #     - type: wms
      #       url: "https://www.geodaten-mv.de/dienste/dgm_wms"
      #       layer: "hohenlinien"
      #       srs: "EPSG:25833"
      #       format: "image/png"
      #       targetFolder: "Öffentlich Planungsbüro Schulz/Projekte/22-16 Maxsolar - Friedrichshof/GIS/Höhenlinien"
      #       layers:
      #         - Geltungsbereich
      #       buffer: 600
      #       zoom: 0 # Zoom doesnt work (only for this layer?)
      #       overwrite: true
      #       postProcess:
      #         alphaColor: "#ffffff"  # Set white to fully transparent
      #         removeText: true
  - name: Plasten
    exportFormat: dxf
    dxfVersion: R2018
    crs: EPSG:25833
    # dxfFilename: "Öffentlich Planungsbüro Schulz/Projekte/23-24 Maxsolar - Plasten/Zeichnung/Plasten4.dxf"
    dxfFilename: "Öffentlich Planungsbüro Schulz/Projekte/23-24 Maxsolar - Plasten/Zeichnung/dev/test.dxf"
    dumpOutputDir: "Öffentlich Planungsbüro Schulz/Projekte/23-24 Maxsolar - Plasten//GIS/dxf_dump"
    shapefileOutputDir: "Öffentlich Planungsbüro Schulz/Projekte/23-24 Maxsolar - Plasten/GIS/generated"
    legend:
      title: "Planzeichen"
      subtitle: "(gem. PlanzV 1990-PlanzV 90 v.18.12.1990)"
      max_width: 160
      title_spacing: 0      # Space after the main legend title
      subtitle_spacing: 4   # Space after the main subtitle
      group_spacing: 3      # Space between different groups in the legend
      group_title_spacing: 2 # Space after each group's title
      group_subtitle_spacing: 3 # Space after each group's subtitle
      item_spacing: 4       # Space between individual items within a group
      position:
        x: 367841
        y: 5942622
      titleTextStyle:
        height: 8
        color: "darkslategrey-20"
        text_style: "Arial"
        # rotation: 45
        # attachment_point: MTEXT_MIDDLE_CENTER
        # flow_direction: MTEXT_LEFT_TO_RIGHT
        # line_spacing_style: MTEXT_AT_LEAST
        # line_spacing_factor: 1.5
        # bg_fill: 1
        # bg_fill_color: 'yellow'
        # bg_fill_scale: 1.2
        # underline: True
        # overline: False
        # strike_through: False
        # oblique_angle: 15
      titleSubtitleStyle:
        height: 3.5
        color: "Dark Gray"
        text_style: "Arial"
      groupTextStyle:
        color: "white"
        height: 5
        text_style: "Arial"
      subtitleTextStyle:
        color: "white"
        height: 3.5
        text_style: "Arial"
      itemTextStyle:
        color: "white"
        height: 3
        text_style: "Arial"
        attachment_point: MTEXT_MIDDLE_LEFT
      groups:
        - name: "Art der baulichen Nutzung"
          update: true
          subtitle: "§ 9 Abs. 1 Nr. 1 BauGB"
          items:
            - name: "Sonstiges Sondergebiet (§ 11 Abs. 2 BauNVO) Zweckbestimmung: Energiegewinnung auf der Basis solarer Strahlungsenergie"
              type: area
              applyHatch: true
              style: baufeldLegend
              blockSymbol: "Sonstiges Sondergebiet EBS"
              blockSymbolScale: 2
        - name: "Maß der baulichen Nutzung"
          update: true
          subtitle: "§ 9 Abs. 1 Nr. 1 BauGB"
          items:
            - name: "Grundflächenzahl"
              type: empty
              blockSymbol: "GRZ"
              blockSymbolScale: 2
        - name: "Bauweise, Baulinien, Baugrenzen"
          update: true
          subtitle: "§ 9 Abs. 1 Nr. 2 BauGB"
          items:
            - name: "Baugrenze"
              type: empty
              blockSymbol: "Baugrenze"   
        - name: "Verkehrsflächen"
          update: true
          subtitle: "(§ 9 Abs. 1 Nr. 11 und Abs. 6 BauGB)"
          items:
            - name: "Verkehrsfläche besonderer Zweckbestimmung"
              type: area
              applyHatch: true
              style: verkehrsfläche
            - name: "Verkehrsberuhigter Bereich"
              type: empty
              blockSymbol: "Verkehrsberuhigter Bereich"
              blockSymbolScale: 2
            - name: "Privat"
              type: empty
              blockSymbol: "Privat"
              blockSymbolScale: 2
        - name: "Grünflächen"
          update: true
          subtitle: "§ 9 Abs.1 Nr. 15 BauGB"
          items:
            - name: "Private Grünflächen"
              type: area
              style: grünflächeLegend
              applyHatch: true
        - name: "Wasserflächen und Flächen für die Wasserwirtschaft, den Hochwasserschutz und die Regelung des Wasserabflusses"
          update: true
          subtitle: "§ 9 Abs. 1 Nr. 16 BauBG"
          items:
            - name: "Wasserflächen"
              type: area
              style: waterLegend
              applyHatch: true
        - name: "Planungen, Nutzungsregelungen, Maßnahmen und Flächen für Maßnahmen zum Schutz, zur Pflege und zur Entwicklung von Natur und Landschaft"
          update: true
          subtitle: "§ 9 Abs.1 Nr. 20 BauGB"
          items:
            - name: "Umgrenzung von Flächen für Maßnahmen zum Schutz, zur Pflege und zurEntwicklung von Natur und Landschaft"
              type: empty
        - name: "Sonstige Planzeichen"
          update: true
          items:
            - name: "Grenze des räumlichen Geltungsbereiches des Bebauungsplans"
              subtitle: "(§ 9 Abs. 7 BauGB)"
              type: area
              rectangleStyle: geltungsbereich_2
            - name: "Hauptversorgungs- und Hauptabwasserleitungen unterirdisch"
              subtitle: "(§ 5 Abs. 2 Nr.4 und Abs. 4, § 9 Abs.1 Nr.1 u. Abs. 6)"
              type: area
              blockSymbol: "Leitung oberirdisch"
              blockSymbolScale: 2
            - name: "Hauptversorgungs- und Hauptabwasserleitungen oberirdisch"
              subtitle: "(§ 5 Abs. 2 Nr.4 und Abs. 4, § 9 Abs.1 Nr.1 u. Abs. 6)"
              type: area
              blockSymbol: "Leitung unterirdisch"
              blockSymbolScale: 2
            - name: "Mit Geh-, Fahr- und Leitungsrechten zu belastende Flächen"
              subtitle: "(§ 9 Abs.1 Nr.21 und Abs. 6 BauGB)"
              type: area
              rectangleStyle: gfl1
              blockSymbol: "GFL1"
              blockSymbolScale: 2
            - name: "Mit Geh-, Fahr- und Leitungsrechten zu belastende Flächen"
              subtitle: "(§ 9 Abs.1 Nr.21 und Abs. 6 BauGB)"
              type: empty
              blockSymbol: "GFL2"
              blockSymbolScale: 1.6
        - name: "Darstellung ohne Normcharakter"
          update: true
          items:
            - name: "Gemeindegrenze"
              type: diagonal_line
              style: gemeindegrenze
            - name: "Gemarkungsgrenze"
              type: line
              style: gemarkungsgrenze
            - name: "Flurgrenze"
              type: line
              style: flurgrenze
            - name: "Flurstücksnummer\nFlurstücksgrenze"
              type: empty
              blockSymbol: "Parcel"
              blockSymbolScale: 1.4
            - name: "anstehendes Gelände in Meter über NHN im amtlichen Höhenbezugssystem DHHN2016 als unterer Höhenbezugspunkt"
              type: empty
              blockSymbol: "Contours"
              blockSymbolScale: 1.4
            - name: "Bemaßung in Meter"
              type: empty
              blockSymbol: "Bemaßung"
        - name: "Nachrichtliche Übernahme"
          update: true
          items:
            - name: "gesetzlich geschützes Biotop § 9 Abs. 6 BauGB i. V. m. § 20 NatSchAG - MV"
              type: area
              rectangleStyle: gesGeschuetzesBiotop
              blockSymbol: "Gesetzlich geschütztes Biotop"
              blockSymbolScale: 1.8
            - name: "Wald"
              type: area
              style: wald
              applyHatch: true
            - name: "Baum"
              type: empty
              blockSymbol: "Baum"
              blockSymbolScale: 1.8
            - name: "Baum erhalten"
              type: empty
              blockSymbol: "Baum erhalten"
              blockSymbolScale: 1.8
            - name: "Abgrenzung unterschiedlicher Nutzung, z. B. von Baugebieten, oder Abgrenzung des Maßes der Nutzung innerhalb eines Baugebiets z.B. § 1 Abs. 4 § 16 Abs. 5 BauNVO)"
              type: empty
              blockSymbol: "Abgrenzung unterschiedlicher Nutzung"
              blockSymbolScale: 1.4
    pathArrays:
      TSymbolArrays:
        pathArrays:
          - sourceLayer: "Schutzflächeumgrenzung T-Symbol Temp"
            targetLayer: "Schutzflächeumgrenzung T-Symbol Array"
            block: "T-Symbol"
            spacing: 7
            scale: 0.6
            bufferDistance: 0.6
          - sourceLayer: "Schutzflächeumgrenzung T-Small Temp"
            targetLayer: "Schutzflächeumgrenzung T-Small Array"
            block: "T-Small"
            spacing: 2
            scale: 0.6
            bufferDistance: 0.6
            adjustForVertices: true
            # showDebugVisual: true
    viewports:
      - name: MainView
        center: [425, 450]
        width: 720
        height: 653
        target_view:
          center: [1000, 1000]
          height: 500
      - name: WorkView
        center: [780, 2000]
        width: 720
        height: 653
        target_view:
          center: [1000, 1000]
          height: 500
    # reports:
    #   - name: Anteilige Flurstücksgrößen innerhalb Geltungsbereich Nordwesten in Plasten
    #     type: area
    #     baseLayer: Parcel
    #     coverLayer: Geltungsbereich NW
    #     output:
    #       format: csv
    #       file: "Öffentlich Planungsbüro Schulz/Projekte/23-24 Maxsolar - Plasten/Ausgabe Karten und Daten/ZAV/areas_geltungsbereich_nw_by_parcel"
    #     includeLabels: true
    #     includeTotalArea: true
    #   - name: Anteilige Flurstücksgrößen innerhalb Geltungsbereich Nordosten in Plasten
    #     type: area
    #     baseLayer: Parcel
    #     coverLayer: Geltungsbereich NO
    #     output:
    #       format: csv
    #       file: "Öffentlich Planungsbüro Schulz/Projekte/23-24 Maxsolar - Plasten/Ausgabe Karten und Daten/ZAV/areas_geltungsbereich_no_by_parcel"
    #     includeLabels: true
    #     includeTotalArea: true
    #   - name: Anteilige Flurstücksgrößen innerhalb Geltungsbereich Süden in Plasten
    #     type: area
    #     baseLayer: Parcel
    #     coverLayer: Geltungsbereich S
    #     output:
    #       format: csv
    #       file: "Öffentlich Planungsbüro Schulz/Projekte/23-24 Maxsolar - Plasten/Ausgabe Karten und Daten/ZAV/areas_geltungsbereich_s_by_parcel"
    #     includeLabels: true
    #     includeTotalArea: true
    geomLayers:
      - name: Flur
        update: true
        close: true
        shapeFile: "Öffentlich Planungsbüro Schulz/Projekte/23-24 Maxsolar - Plasten/GIS/input/flur.shp"
        label: flurname
        linetypeScale: 0.2
        linetypeGeneration: true
        style: flur
        style: flurgrenze
        viewports:
          - name: WorkView
            style: flurWorkView
      - name: Parcel
        update: true
        shapeFile: "Öffentlich Planungsbüro Schulz/Projekte/23-24 Maxsolar - Plasten/GIS/input/parcel.shp"
        label: label
        style: parcel
        viewports:
          - name: WorkView
            style: parcelWorkView
      - name: Gemarkung
        update: true
        close: true
        shapeFile: "Öffentlich Planungsbüro Schulz/Projekte/23-24 Maxsolar - Plasten/GIS/input/gemarkung.shp"
        label: gmkname
        linetypeGeneration: true
        style: gemarkungsgrenze
        viewports:
          - name: WorkView
            style: gemarkungWorkView
      - name: Gemeinde
        update: true
        close: true
        shapeFile: "Öffentlich Planungsbüro Schulz/Projekte/23-24 Maxsolar - Plasten/GIS/input/gemeinde.shp"
        label: gen
        # linetypeScale: 0.2
        linetypeGeneration: true
        style: gemeindegrenze
        viewports:
          - name: WorkView
            style: gemeindeWorkView
      - name: Grünfläche Input 
        shapeFile: "Öffentlich Planungsbüro Schulz/Projekte/23-24 Maxsolar - Plasten/GIS/input/grünfläche_input_2.shp"
      - name: Wald
        update: true
        shapeFile: "Öffentlich Planungsbüro Schulz/Projekte/23-24 Maxsolar - Plasten/GIS/input/wald.shp"
        close: true
        operations:
          - type: dissolve
        viewports:
          - name: WorkView
            style: wald
      - name: Wald Schraffur
        update: true
        style: wald
        applyHatch:
          layers:
            - Wald
      - name: Biotope Input
        shapeFile: "Öffentlich Planungsbüro Schulz/Projekte/23-24 Maxsolar - Plasten/GIS/input/biotope.shp"
      - name: Exclude
        shapeFile: "Öffentlich Planungsbüro Schulz/Projekte/23-24 Maxsolar - Plasten/GIS/input/exclude.shp"
      # - name: Exclude Acad
      #   update: false
      #   dxfLayer: "Exclude Acad"
      - name: Baumabstand Puffer
        shapeFile: "Öffentlich Planungsbüro Schulz/Projekte/23-24 Maxsolar - Plasten/GIS/input/baum_abstand.shp"
        operations:
          - type: buffer
            distance: 5
      - name: Geschütze Biotope
        update: true
        # linetypeScale: 0.2
        linetypeGeneration: true
        style: gesGeschuetzesBiotop
        shapeFile: "Öffentlich Planungsbüro Schulz/Projekte/23-24 Maxsolar - Plasten/GIS/input/gesch_biotope.shp"
      - name: FG Buffer
        operations:
          - type: buffer
            distance: 5
        shapeFile: "Öffentlich Planungsbüro Schulz/Projekte/23-24 Maxsolar - Plasten/GIS/input/FG.shp"
      - name: Geltungsbereich NW
        update: true
        style: geltungsbereich
        operations:
          - type: copy
            layers:
              - name: Parcel
                values:
                  - "1"
                  - "2"
                  - "4"
                  - "6"
                  - "7"
                  - "14"
          - type: filter
            layers:
              - name: Flur
                values:
                  - "Flur 1"
              - name: Gemarkung
                values:
                  - "Groß Plasten"
              - name: Gemeinde
                values:
                  - "Groß Plasten"
          - type: difference
            layers:
              - Wald
              - Baumabstand Puffer
              - Exclude
      - name: Geltungsbereich NW 2
        update: true
        linetypeScale: 1
        style: geltungsbereich_2
        operations:
          - type: buffer
            layers:
              - name: Geltungsbereich NW
            distance: 2
      - name: Geltungsbereich NO
        update: true
        style: geltungsbereich
        close: true
        operations:
          - type: copy
            layers:
              - name: Parcel
                values:
                  - "24/8"
                  - "24/9"
          - type: filter
            layers:
              - name: Flur
                values:
                  - "Flur 1"
              - name: Gemarkung
                values:
                  - "Groß Plasten"
              - name: Gemeinde
                values:
                  - "Groß Plasten"
          - type: difference
            useBufferTrick: true
            layers:
              - Wald
              - Baumabstand Puffer
              - Exclude
      - name: Geltungsbereich NO 2
        update: true
        linetypeScale: 1
        style: geltungsbereich_2
        operations:
          - type: buffer
            layers:
              - name: Geltungsbereich NO
            distance: 2
      - name: Geltungsbereich S
        update: true
        style: geltungsbereich
        close: true
        operations:
          - type: copy
            layers:
              - name: Parcel
                values:
                  - "41/1"
          - type: filter
            layers:
              - name: Flur
                values:
                  - "Flur 2"
              - name: Gemarkung
                values:
                  - "Klein Plasten"
              - name: Gemeinde
                values:
                  - "Groß Plasten"
          - type: difference
            layers:
              - Wald
              - Baumabstand Puffer
              - Exclude
      - name: Geltungsbereich S 2
        update: true
        linetypeScale: 1
        style: geltungsbereich_2
        operations:
          - type: buffer
            layers:
              - name: Geltungsbereich S
            distance: 2
      - name: Waldabstand
        operations:
          - type: buffer
            joinStyle: mitre
            layers:
              - Wald
            distance: 30
          - type: intersection
            layers:
              - Geltungsbereich NW
              - Geltungsbereich NO
              - Geltungsbereich S
          - type: filterGeometry
            minArea: 200
      - name: Biotope
        update: true
        viewports:
          - name: WorkView
            style: biotopWorkView
        operations:
          - type: dissolve
            layers:
              - Biotope Input
              - Geschütze Biotope
      - name: Grünfläche
        update: true
        viewports:
          - name: WorkView
            style: grünflächeWorkView
        operations:
          - type: copy
            layers:
              - Grünfläche Input 
              - Waldabstand
              - Baumabstand Puffer
              - FG Buffer
              # - Biotoppuffer
              - Biotope
          - type: dissolve
  
          - type: intersection
            layers:
              - Geltungsbereich NW
              - Geltungsbereich NO
              - Geltungsbereich S
          - type: buffer
            distance: -3
        # bluntAngles:
        #   angleThreshold: 25  # Angles smaller than this will be blunted
        #   distance: 10.0  # Distance to move the vertex along the angle bisector
      - name: Grünfläche Schraffur
        update: true
        style: grünfläche
        applyHatch:
          layers:
            - Grünfläche
      - name: Schutzflächeumgrenzung
        update: true
        viewports:
          - name: WorkView
            style: schutzflächeWorkView
        operations:
          - type: copy
            layers:
              - Grünfläche Input 
              - Waldabstand
              - Baumabstand Puffer
              - FG Buffer
              # - Biotoppuffer
              - Biotope
          - type: dissolve
          - type: difference
            layers:
              - Grünfläche
          - type: intersection
            layers:
              - Geltungsbereich NW
              - Geltungsbereich NO
              - Geltungsbereich S
          # - type: filterGeometry
          #   minArea: 200
      - name: Biotoppuffer
        update: true
        viewports:
          - name: WorkView
            style:
              color: "brilliant-green"
              linetype: "ACAD_ISO02W100"
        operations:
          - type: buffer
            layers:
              - Biotope
            distance: 10
          - type: difference
            layers:
              - Biotope
              - Schutzflächeumgrenzung
              - Grünfläche
          - type: intersection
            layers:
              - Geltungsbereich NW
              - Geltungsbereich NO
              - Geltungsbereich S
      - name: Biotoppuffer Schraffur
        update: true
        style: grünfläche
        applyHatch:
          layers:
            - Biotoppuffer
      - name: Schutzflächeumgrenzung T-Symbol Temp
        # update: true
        close: false
        plot: false
        operations:
          - type: copy
            layers:
              - Grünfläche
              - Schutzflächeumgrenzung
          - type: dissolve
          - type: intersection
            layers:
              - Geltungsbereich NW
              - Geltungsbereich NO
              - Geltungsbereich S
          - type: filterGeometry
            minArea: 200
      - name: Schutzflächeumgrenzung T-Small Temp
        # update: true
        close: false
        plot: false
        operations:
          - type: copy
            layers:
              - Grünfläche
              - Schutzflächeumgrenzung
          - type: dissolve
          - type: intersection
            layers:
              - Geltungsbereich NW
              - Geltungsbereich NO
              - Geltungsbereich S
          - type: filterGeometry
            maxArea: 200
            minArea: 10
      - name: Schutzflächeumgrenzung Schraffur
        update: true
        style: schutzflächeumgrenzung
        applyHatch:
          layers:
            - Schutzflächeumgrenzung
      - name: Baufeld
        update: true
        close: true
        viewports:
          - name: WorkView
            style: baufeld
        operations:
          - type: copy
            layers:
              - Geltungsbereich NW
              - Geltungsbereich NO
              - Geltungsbereich S
          - type: difference
            # useBufferTrick: true
            reverseDifference: false
            layers:
              - Schutzflächeumgrenzung
              - Grünfläche
              - Biotoppuffer
      - name: Baufeld Schraffur
        update: true
        style: baufeld
        applyHatch:
          layers:
            - Baufeld
          # individual_hatches: true
          # pattern: 'ANSI31'
          # scale: 50  # Adjust this value to change the hatch density
          # color: "Blue"  # ACI color index for Light Red
      - name: Baugrenze 2
        update: true
        style: 
          color: "Green Blue"
          lineweight: 60
        close: true
        operations:
          - type: buffer
            layers:
              - Baufeld
            distance: -3.4
      - name: Baugrenze
        update: true
        style: baugrenze
        linetypeScale: 0.5
        linetypeGeneration: true
        close: true
        viewports:
          - name: WorkView
            style: 
              color: "Blue"
        operations:
          - type: buffer
            layers:
              - Baufeld
            distance: -3
      - name: WMTS DOP
        # update: true
        style: 
          locked: true
          # color: "White"
        operations:
          - type: wmts
            url: "https://www.geodaten-mv.de/dienste/dop_wmts/wmts/1.0.0/WMTSCapabilities.xml"
            layer: "mv_dop"
            # zoom: "10"
            proj: "ETRS89UTM33"
            targetFolder: "Öffentlich Planungsbüro Schulz/Projekte/23-24 Maxsolar - Plasten/GIS/DOP"
            layers:
              - Geltungsbereich NW
              - Geltungsbereich NO
              - Geltungsbereich S
            buffer: 200
            stitchTiles: true
            # overwrite: true
      # - name: WMTS Basemap
      #   update: true
      #   color: white
      #   locked: true
      #   operations:
      #     - type: wmts
      #       url: "https://sgx.geodatenzentrum.de/wmts_basemapde/1.0.0/WMTSCapabilities.xml"
      #       layer: "de_basemapde_web_raster_farbe"
      #       zoom: "10"
      #       proj: "DE_EPSG_25833_ADV"
      #       targetFolder: "Öffentlich Planungsbüro Schulz/Projekte/23-24 Maxsolar - Plasten/GIS/Basemap"
      #       layers:
      #         - Geltungsbereich NW
      #         - Geltungsbereich NO
      #         - Geltungsbereich S
      #       buffer: 200
      # - name: Contour
      #   update: true
      #   style:
      #     color: white
      #     locked: false
      #   label: elevation
      #   operations:
      #     - type: contour
      #       url: "https://www.geodaten-mv.de/dienste/dgm_atom?type=dataset&id=df758744-b2a1-4d39-b34c-9ec5bf9b4372"
      #       layers:
      #         - Geltungsbereich NW
      #       buffer: 1000
      # - name: WMS Gebäude
      #   update: true
      #   operations:
      #     - type: wms
      #       url: "https://www.geodaten-mv.de/dienste/gebäude_wms"
      #       layer: "gebäude"
      #       srs: "EPSG:25833"
      #       format: "image/png"
      #       targetFolder: "Öffentlich Planungsbüro Schulz/Projekte/23-24 Maxsolar - Plasten/GIS/Gebäude"
      #       layers:
      #         - Geltungsbereich NW
      #         - Geltungsbereich NO
      #         - Geltungsbereich S
      #       buffer: 100
      #       zoom: 10
      #       # overwrite: true
      #       postProcess:
      #           colorMap:
      #             "#ff0000": "#808080"  # Map red to grey
      #           alphaColor: "#ffffff"  # Set white to fully transparent
      #           # tolerance: 30  # Increased tolerance to catch similar shades
      #           grayscale: true
      #           # removeText: true
      #       stitchTiles: true
  - name: Torgelow
    exportFormat: dxf
    dxfVersion: R2018
    crs: EPSG:25833
    dxfFilename: "Öffentlich Planungsbüro Schulz/Projekte/23-25 Maxsolar - Torgelow/Zeichnung/torgelow.dxf"
    geomLayers:
      - name: Flur
        update: true
        add: true
        shapeFile: "Öffentlich Planungsbüro Schulz/Projekte/23-25 Maxsolar - Torgelow/GIS/flur2.shp"
        label: "flurname"
        linetype: Continuous
        lineweight: 13
        plot: false
        locked: true
        frozen: false
        is_on: true
        vp_freeze: false
        # transparency: 0.0
      - name: Parcel
        update: true
        add: true
        shapeFile: "Öffentlich Planungsbüro Schulz/Projekte/23-25 Maxsolar - Torgelow/GIS/parcel2.shp"
        label: label
        color: White
        linetype: ACAD_ISO11W100
        lineweight: 30
        plot: true
        frozen: false
        is_on: true 
        vp_freeze: false
        # transparency: 0.0
        locked: true
        close: true
      - name: Gemarkung
        update: true
        add: true
        shapeFile: "Öffentlich Planungsbüro Schulz/Projekte/23-25 Maxsolar - Torgelow/GIS/gemarkung2.shp"
        label: gmkname
        color: White
        linetype: Continuous
        lineweight: 13
        plot: false
        locked: false
        frozen: false
        is_on: true
        vp_freeze: false
        # transparency: 0.0
      - name: Gemeinde
        update: true
        add: true
        shapeFile: "Öffentlich Planungsbüro Schulz/Projekte/23-25 Maxsolar - Torgelow/GIS/gemeinde2.shp"
        label: gen
        color: White
        linetype: Continuous
        lineweight: 13
        plot: false
        locked: false
        frozen: false
        is_on: true
        vp_freeze: false
        # transparency: 0.0
      - name: Wald
        update: true
        add: true
        shapeFile: "Öffentlich Planungsbüro Schulz/Projekte/23-25 Maxsolar - Torgelow/GIS/wald.shp"
        label: waldname
        color: Dark Green
        linetype: Continuous
        lineweight: 13
        plot: true
        locked: false
        frozen: false
        is_on: true
        vp_freeze: false
        # transparency: 0.0
        close: true
      # - name: Biotope
      #   add: true
      #   shapeFile: "Öffentlich Planungsbüro Schulz/Projekte/23-25 Maxsolar - Torgelow/GIS/biotope.shp"
      #   label: biotopn
      #   color: "Green"
      #   close: true
      #   locked: false
      - name: Straße
        update: true
        shapeFile: "Öffentlich Planungsbüro Schulz/Projekte/23-25 Maxsolar - Torgelow/GIS/abstand.shp"
      # - name: Biotope Puffer
      #   color: "Light Green"
      #   close: true
      #   locked: false
      #   add: true
      #   operations:
      #     - type: buffer
      #       layers:
      #         - Biotope
      #       distance: 5
      #     - type: intersection
      #       layers:
      #         - Geltungsbereich
      - name: Straße Abstand
        update: true # I think this is optional, if that layer does not already exists in the dxf file, but it cant hurt and makes sure that it updates
        operations:
          - type: buffer
            layers: 
              - Straße
            distance: 7
      # - name: Flur Offset
      #   update: true
      #   color: "Light Green"
      #   close: false
      #   locked: false
      #   add: true
      #   operations:
      #     - type: buffer
      #       layers:
      #         - Flur
      #       distance: 10
      - name: Weg
        update: true
        shapeFile: "Öffentlich Planungsbüro Schulz/Projekte/23-25 Maxsolar - Torgelow/GIS/weg.shp"
      - name: Weg Abstand
        update: true
        operations:
          # - type: buffer
          #   layers:
          #     - Weg
          #   distance: 1
          - type: copy
            layers:
              - Weg
      - name: Geltungsbereich
        update: true
        color: "Red"
        locked: false
        close: false
        add: true
        operations:
          - type: copy
            layers:
              - name: Parcel
                values:
                  - "81"
                  - "87/1"
                  - "89"
                  - "95"
                  - "96"
                  - "97"
                  - "99"
                  - "100"
                  - "101"
                  - "102"
                  - "103"
                  - "104"
          - type: filter
            layers:
              - name: Flur
                values:
                  - Flur 2
              - name: Gemarkung
                values:
                  - Torgelow am See
              - name: Gemeinde
                values:
                  - Torgelow am See
          - type: difference
            layers:
              - Wald
              - Straße Abstand
              - Weg Abstand
      - name: Wald Abstand
        update: true
        color: "Light Green"
        close: true
        locked: false
        # add: true
        operations:
          - type: buffer
            layers:
              - Wald
            distance: 30
          - type: intersection
            layers:
              - Geltungsbereich
      - name: Grünflächeinput
        update: true
        shapeFile: "Öffentlich Planungsbüro Schulz/Projekte/23-25 Maxsolar - Torgelow/GIS/grünfläche.shp"
      - name: Temp Grünfl
        update: true
        operations:
          - type: filter
            layers:
              - name: Parcel
                values:
                  - "97"
                  - "99"
                  - "100"
                  - "101"
                  - "102"
                  # - "103"
              - name: Flur
                values:
                  - Flur 2
              - name: Gemarkung
                values:
                  - Torgelow am See
              - name: Gemeinde
                values:
                  - Torgelow am See
      - name: Grünfläche
        update: true
        color: "Light Green"
        close: true
        locked: false
        add: true
        operations:
          - type: merge
            layers:
              - Grünflächeinput
              - Temp Grünfl
              - Wald Abstand
          - type: difference
            layers:
              - Weg Abstand
          - type: intersection
            layers:
              - Geltungsbereich
          - type: buffer
            distance: -5
            mode: keep # Keeps both the original geometries and the buffered ones
      - name: Baufeld
        update: true
        color: "Light Red"
        locked: false
        close: true
        textColor: "White"
        add: true
        operations:
          - type: copy
            layers:
              - Geltungsbereich
          # - type: difference
          #   layers:
          #     - Biotope
          #     - Wald Abstand
          #     - Grünfläche
      - name: Baugrenze
        update: true
        color: "Blue"
        locked: false
        close: true
        add: true
        operations:
          - type: buffer
            layers:
              - Baufeld
            distance: -3
      - name: WMTS DOP
        # update: true
        color: white
        locked: true
        add: true
        operations:
          - type: wmts
            url: "https://www.geodaten-mv.de/dienste/dop_wmts/wmts/1.0.0/WMTSCapabilities.xml"
            layer: "mv_dop"
            zoom: "10"
            proj: "ETRS89UTM33"
            targetFolder: "Öffentlich Planungsbüro Schulz/Projekte/23-25 Maxsolar - Torgelow/GIS/DOP"
            layers:
              - Geltungsbereich
            buffer: 100
      - name: WMTS Basemap
        # update: true
        color: white
        locked: true
        add: true
        operations:
          - type: wmts
            url: "https://sgx.geodatenzentrum.de/wmts_basemapde/1.0.0/WMTSCapabilities.xml"
            layer: "de_basemapde_web_raster_farbe"
            zoom: "10"
            proj: "DE_EPSG_25833_ADV"
            targetFolder: "Öffentlich Planungsbüro Schulz/Projekte/23-25 Maxsolar - Torgelow/GIS/Basemap"
            layers:
              - Geltungsbereich
            buffer: 200
