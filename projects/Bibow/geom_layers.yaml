geomLayers:
  ### Grundlagen ###
  - name: Parcel
    updateDxf: true
    label: label
    operations:
      - type: simpleLabel
        labelColumn: label  # Explicitly specify the label column
        style: baum  # Using an existing text style from styles.yaml
    shapeFile: "Öffentlich Planungsbüro Schulz/Projekte/24-07 Solarfaktor - Bibow/GIS/input/parcel.shp"
  - name: Flur
    # updateDxf: true
    label: flurname
    operations:
      - type: simpleLabel
        labelColumn: flurname  # Explicitly specify the label column
        style: baum  # Using an existing text style from styles.yaml
    shapeFile: "Öffentlich Planungsbüro Schulz/Projekte/24-07 Solarfaktor - Bibow/GIS/input/flur.shp"
  - name: Gemarkung
    # updateDxf: true
    label: gmkname
    shapeFile: "Öffentlich Planungsbüro Schulz/Projekte/24-07 Solarfaktor - Bibow/GIS/input/gemarkung.shp"
  - name: Gemeinde
    # updateDxf: true
    label: gen
    shapeFile: "Öffentlich Planungsbüro Schulz/Projekte/24-07 Solarfaktor - Bibow/GIS/input/gemeinde.shp"

### Bahn
  - name: Bahnstrasse 200m Puffer
    # updateDxf: true
    # style: geltungsbereich
    shapeFile: "Öffentlich Planungsbüro Schulz/Projekte/24-07 Solarfaktor - Bibow/GIS/input/Bahnstrasse 200m Puffer.shp"

### Wald
  - name: "Waldartige Flächen"
    shapeFile: "Öffentlich Planungsbüro Schulz/Projekte/24-07 Solarfaktor - Bibow/GIS/input/Waldartig.shp"

  - name: "Wald Input"
    shapeFile: "Öffentlich Planungsbüro Schulz/Projekte/24-07 Solarfaktor - Bibow/GIS/input/Wald.shp"

  - name: "Wald"
    updateDxf: true
    style: wald
    operations:
      - type: dissolve
        layers:
          - name: "Waldartige Flächen"
          - name: "Wald Input"

  - name: "Waldabstand"
    operations:
      - type: buffer
        distance: 30
        joinStyle: bevel
        layers:
          - name: "Wald"

  ### Hecke
  - name: "Hecke"
    shapeFile: "Öffentlich Planungsbüro Schulz/Projekte/24-07 Solarfaktor - Bibow/GIS/input/Hecke1.shp"

  ### Biotop
  - name: "Biotop"
    shapeFile: "Öffentlich Planungsbüro Schulz/Projekte/24-07 Solarfaktor - Bibow/GIS/input/Biotop.shp"

  ### Exclude
  - name: "Exclude Geltungsbereich"
    shapeFile: "Öffentlich Planungsbüro Schulz/Projekte/24-07 Solarfaktor - Bibow/GIS/input/Exclude Geltungsbereich.shp"

  ### Geltungsbereich ###
  - name: Geltungsbereich A
    updateDxf: true
    style: geltungsbereich
    operations:
      - type: copy
        layers:
          - name: Parcel
            values:
              - "32/11"  # Matches exactly what's in the shapefile
              - "38/2"
              - "37/7"
              - "46/2"
              - "53/23"
            column: label  # Explicitly specify the column to search in
      - type: filterByIntersection
        layers:
          - name: Flur
            values:
              - Flur 5
          - name: Gemarkung
            values:
              - Bibow
          - name: Gemeinde
            values:
              - Bibow
      - type: intersection
        layers:
          - name: Bahnstrasse 200m Puffer
      - type: difference
        reverseDifference: false
        layers:
          - name: "Waldabstand"
          - name: "Hecke"
          - name: "Biotop"
          - name: "Exclude Geltungsbereich"
      - type: dissolve
  - name: Geltungsbereich B
    updateDxf: true
    style: geltungsbereich
    operations:
      - type: copy
        layers:
          - name: Parcel
            values:
              - "52/3"
            column: label  # Explicitly specify the column to search in
      - type: filterByIntersection
        layers:
          - name: Flur
            values:
              - Flur 2
          - name: Gemarkung
            values:
              - Bibow
          - name: Gemeinde
            values:
              - Bibow
      - type: intersection
        layers:
          - name: Bahnstrasse 200m Puffer
      - type: difference
        reverseDifference: false
        layers:
          - name: "Waldabstand"
          - name: "Hecke"
          - name: "Biotop"
          - name: "Exclude Geltungsbereich"
      - type: dissolve
  - name: Geltungsbereich C
    updateDxf: true
    style: geltungsbereich
    operations:
      - type: copy
        layers:
          - name: Parcel
            values:
              - "61/3"  # Matches exactly what's in the shapefile
              - "68/1"
              - "76"
              - "77"
              - "78"
              - "79"
              - "80"
              - "81"
              - "83/1"
              - "84"
              - "85"
              - "87"
              - "88/3"
              - "89"
            column: label  # Explicitly specify the column to search in
      - type: filterByIntersection
        layers:
          - name: Flur
            values:
              - Flur 2
          - name: Gemarkung
            values:
              - Bibow
          - name: Gemeinde
            values:
              - Bibow
      - type: intersection
        layers:
          - name: Bahnstrasse 200m Puffer
      - type: difference
        reverseDifference: false
        layers:
          - name: "Waldabstand"
          - name: "Hecke"
          - name: "Biotop"
          - name: "Exclude Geltungsbereich"
      - type: dissolve
  - name: Geltungsbereich D
    updateDxf: true
    style: geltungsbereich
    operations:
      - type: copy
        layers:
          - name: Parcel
            values:
              - "17"
              - "20"
              - "21"
              - "23"
              - "24"
            column: label  # Explicitly specify the column to search in
      - type: filterByIntersection
        layers:
          - name: Flur
            values:
              - Flur 4
          - name: Gemarkung
            values:
              - Bibow
          - name: Gemeinde
            values:
              - Bibow
      - type: intersection
        layers:
          - name: Bahnstrasse 200m Puffer
      - type: difference
        reverseDifference: false
        layers:
          - name: "Waldabstand"
          - name: "Hecke"
          - name: "Biotop"
          - name: "Exclude Geltungsbereich"
      - type: dissolve

  ### Baufeld and Baugrenze ###
  - name: Baufeld
    updateDxf: true
    close: true
    viewports:
      - name: WorkView
        style: baufeld
    operations:
      - type: copy
        layers:
          - Geltungsbereich A
          - Geltungsbereich B
          - Geltungsbereich C
          - Geltungsbereich D
      - type: difference
        useBufferTrick: true
        reverseDifference: false
        operations:
          - type: dissolve
            layers:
              - "Waldabstand"
              - "Hecke"
              - "Biotop"
              - "Exclude Geltungsbereich"
      - type: filterGeometry
        minArea: 200
        geometryTypes:
          - Polygon

  - name: Baufeld Schraffur
    updateDxf: true
    style: baufeld
    applyHatch:
      layers:
        - Baufeld

  - name: Baugrenze
    updateDxf: true
    style: baugrenze
    linetypeScale: 0.5
    linetypeGeneration: true
    close: true
    operations:
      - type: buffer
        layers:
          - Baufeld
        distance: -3

  - name: Baugrenze 2
    updateDxf: true
    style: baugrenze_2
    close: true
    operations:
      - type: buffer
        layers:
          - Baugrenze
        distance: -0.4

  - name: Baugrenze Report A
    operations:
      - type: copy
        layers:
          - Baugrenze
      - type: intersection
        layers:
          - Geltungsbereich A
      - type: report
        outputFile: "Öffentlich Planungsbüro Schulz/Projekte/24-07 Solarfaktor - Bibow/GIS/reports/baugrenze_a_report.json"
        calculate:
          - area
          - perimeter
        decimalPlaces:
          area: 0

  - name: Baugrenze Report B
    operations:
      - type: copy
        layers:
          - Baugrenze
      - type: intersection
        layers:
          - Geltungsbereich B
      - type: report
        outputFile: "Öffentlich Planungsbüro Schulz/Projekte/24-07 Solarfaktor - Bibow/GIS/reports/baugrenze_b_report.json"
        calculate:
          - area
          - perimeter
        decimalPlaces:
          area: 0

  - name: Baugrenze Report C
    operations:
      - type: copy
        layers:
          - Baugrenze
      - type: intersection
        layers:
          - Geltungsbereich C
      - type: report
        outputFile: "Öffentlich Planungsbüro Schulz/Projekte/24-07 Solarfaktor - Bibow/GIS/reports/baugrenze_c_report.json"
        calculate:
          - area
          - perimeter
        decimalPlaces:
          area: 0

  - name: Baugrenze Report D
    operations:
      - type: copy
        layers:
          - Baugrenze
      - type: intersection
        layers:
          - Geltungsbereich D
      - type: report
        outputFile: "Öffentlich Planungsbüro Schulz/Projekte/24-07 Solarfaktor - Bibow/GIS/reports/baugrenze_d_report.json"
        calculate:
          - area
          - perimeter
        decimalPlaces:
          area: 0
