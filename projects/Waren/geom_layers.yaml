geomLayers:
# - name: Zuwegung Weg
#   shapeFile: "Öffentlich Planungsbüro Schulz/Projekte/22-20 Maxsolar - Waren, Grabowhöfe/GIS/input/zuwegung_weg.shp"
- name: Exclude Böschung
  shapeFile: "Öffentlich Planungsbüro Schulz/Projekte/22-20 Maxsolar - Waren, Grabowhöfe/GIS/input/exclude_böschung.shp"
- name: Exclude Zuwegung
  shapeFile: "Öffentlich Planungsbüro Schulz/Projekte/22-20 Maxsolar - Waren, Grabowhöfe/GIS/input/exclude_zuwegung.shp"
- name: Zuwegung
  shapeFile: "Öffentlich Planungsbüro Schulz/Projekte/22-20 Maxsolar - Waren, Grabowhöfe/GIS/input/maxsolar_zuwegung_mittellinie_ln.shp"
  updateDxf: true
  operations:
    - type: buffer
      distance: 4
      capStyle: square
    - type: difference
      reverseDifference: false
      layers:
        - Exclude Zuwegung
- name: Leitung Mittelspannung Zuwegung
  updateDxf: true
  shapeFile: "Öffentlich Planungsbüro Schulz/Projekte/22-20 Maxsolar - Waren, Grabowhöfe/GIS/input/maxsolar_leitung_ms_zuwegung_ln.shp"
- name: Gas_HD_LEIT
  updateDxf: true
  shapeFile: "Öffentlich Planungsbüro Schulz/Projekte/22-20 Maxsolar - Waren, Grabowhöfe/GIS/input/vermessung_gas_hd_ln.shp"
- name: Gas_HD_LEIT Buffer
  # updateDxf: true
  operations:
    - type: buffer
      layers:
        - Gas_HD_LEIT
      distance: 3
      # capStyle: round
      joinStyle: round
- name: Baum_Laubbaum Points
  # updateDxf: true
  shapeFile: "Öffentlich Planungsbüro Schulz/Projekte/22-20 Maxsolar - Waren, Grabowhöfe/GIS/input/vermessung_baum_laubbaum_pt.shp"
- name: Baum_Laubbaum Label
  updateDxf: true
  style: leitungsLabel
  operations:
    - type: copy
      layers:
        - Baum_Laubbaum Points
    - type: labelAssociation
      labelColumn: "Krone_D"
      labelOffset: 1
- name: Baum_Laubbaum Krone
  updateDxf: true
  operations:
    - type: circle
      layers:
        - Baum_Laubbaum Points
      radiusField: Krone_R
- name: Baum_Laubbaum Buffer
  operations:
    - type: buffer
      layers:
        - Baum_Laubbaum Krone
      distance: 1.5
      capStyle: round
      joinStyle: round
- name: Baum_Laubbaum Envelope
  shapeFile: "Öffentlich Planungsbüro Schulz/Projekte/22-20 Maxsolar - Waren, Grabowhöfe/GIS/input/vermessung_baum_laubbaum_pt.shp"
  operations:
    - type: connect-points
      maxDistance: 27
    - type: buffer
      distance: 10
      capStyle: round
      joinStyle: round
    - type: dissolve
- name: Str-Leitungsabschnitt-NS
  updateDxf: true
  shapeFile: "Öffentlich Planungsbüro Schulz/Projekte/22-20 Maxsolar - Waren, Grabowhöfe/GIS/input/stadtwerke_str_leitungsabschnitt_ns_ln.shp"
- name: Str-Leitungsabschnitt-NS Buffer
  operations:
    - type: buffer
      layers:
        - Str-Leitungsabschnitt-NS
      distance: 2
      capStyle: flat
      joinStyle: flat
- name: Stromkabel-MS_unterirdisch_LEIT
  updateDxf: true
  style:
    layer:
      color: "magenta"
  shapeFile: "Öffentlich Planungsbüro Schulz/Projekte/22-20 Maxsolar - Waren, Grabowhöfe/GIS/input/vermessung_stromkabel_ms_unterirdisch_ln.shp"
- name: Stromkabel-MS_unterirdisch_LEIT Label Points
  # updateDxf: true
  shapeFile: "Öffentlich Planungsbüro Schulz/Projekte/22-20 Maxsolar - Waren, Grabowhöfe/GIS/input/vermessung_stromkabel_ms_unterirdisch_besc_pt.shp"
- name: "Stromkabel-MS_unterirdisch_LEIT Label"
  updateDxf: true
  style: leitungsLabel
  operations:
    - type: copy
      layers:
        - Stromkabel-MS_unterirdisch_LEIT
    - type: labelAssociation
      labelLayer: "Stromkabel-MS_unterirdisch_LEIT Label Points"
      labelColumn: "label"
      labelOffset: 1
- name: Stromkabel-MS_unterirdisch_LEIT Buffer
  operations:
    - type: buffer
      layers:
        - Stromkabel-MS_unterirdisch_LEIT
      distance: 2
      capStyle: flat
      joinStyle: flat
- name: Leitung Ontras Gas
  shapeFile: "Öffentlich Planungsbüro Schulz/Projekte/22-20 Maxsolar - Waren, Grabowhöfe/GIS/input/input_leitungsverlauf_ontras_gas_ln.shp"
- name: Leitung Ontras TK
  shapeFile: "Öffentlich Planungsbüro Schulz/Projekte/22-20 Maxsolar - Waren, Grabowhöfe/GIS/input/input_leitungsverlauf_ontras_tk_ln.shp"
- name: Leitung Ontras Gas Buffer
  operations:
    - type: buffer
      layers:
        - Leitung Ontras Gas
      distance: 10
      # capStyle: round
      joinStyle: round
- name: Parcel
  label: label
  shapeFile: "Öffentlich Planungsbüro Schulz/Projekte/22-20 Maxsolar - Waren, Grabowhöfe/GIS/input/parcel.shp"
- name: Flur
  label: flurname
  shapeFile: "Öffentlich Planungsbüro Schulz/Projekte/22-20 Maxsolar - Waren, Grabowhöfe/GIS/input/flur.shp"
- name: Gemarkung
  label: gmkname
  shapeFile: "Öffentlich Planungsbüro Schulz/Projekte/22-20 Maxsolar - Waren, Grabowhöfe/GIS/input/gemarkung.shp"
- name: Gemeinde
  label: gen
  shapeFile: "Öffentlich Planungsbüro Schulz/Projekte/22-20 Maxsolar - Waren, Grabowhöfe/GIS/input/gemeinde.shp"
- name: Geltungsbereich Input
  # updateDxf: true
  shapeFile: "Öffentlich Planungsbüro Schulz/Projekte/22-20 Maxsolar - Waren, Grabowhöfe/GIS/input/geltungsbereich_pl.shp"
- name: Exclude
  shapeFile: "Öffentlich Planungsbüro Schulz/Projekte/22-20 Maxsolar - Waren, Grabowhöfe/GIS/input/exclude.shp"
- name: Exclude 2
  shapeFile: "Öffentlich Planungsbüro Schulz/Projekte/22-20 Maxsolar - Waren, Grabowhöfe/GIS/input/exclude2.shp"
- name: Exclude 3
  shapeFile: "Öffentlich Planungsbüro Schulz/Projekte/22-20 Maxsolar - Waren, Grabowhöfe/GIS/input/exclude_3.shp"
- name: Exclude Bahn Buffer
  shapeFile: "Öffentlich Planungsbüro Schulz/Projekte/22-20 Maxsolar - Waren, Grabowhöfe/GIS/input/exclude_bahn.shp"
  # It is already a buffered shape
  # operations:
  #   - type: buffer
  #     distance: 5
- name: Baugrenze Exclude
  shapeFile: "Öffentlich Planungsbüro Schulz/Projekte/22-20 Maxsolar - Waren, Grabowhöfe/GIS/input/baugrenze_exclude.shp"
- name: Geltungsbereich
  updateDxf: true
  operations:
    - type: dissolve
      layers:
        - Geltungsbereich Input
        - Zuwegung
    - type: difference
      reverseDifference: false
      layers:
        - Exclude
        - Exclude 2
        - Exclude 3
        # - Exclude Bahn Buffer
        # - Exclude Böschung
    - type: calculate
      calculations:
        - type: area
          as: area
          decimalPlaces: 0
    - type: report
      outputFile: "Öffentlich Planungsbüro Schulz/Projekte/22-20 Maxsolar - Waren, Grabowhöfe/GIS/reports/geltungsbereich_report.json"
      featureColumns:
        - area
      calculate:
        - area
      decimalPlaces:
        area: 0
# Report only
- name: Parcel Intersections
  updateDxf: false
  operations:
    - type: copy
      layers:
        - name: Parcel
    - type: intersection
      layers:
        - name: Geltungsbereich
    - type: filterGeometry
      minArea: 10
      geometryTypes:
        - Polygon
    - type: calculate
      calculations:
        - type: area
          as: intersection_area
          decimalPlaces: 0
    - type: report
      outputFile: "Öffentlich Planungsbüro Schulz/Projekte/22-20 Maxsolar - Waren, Grabowhöfe/GIS/reports/parcel_intersections_report.json"
      featureColumns:
        - label
        - intersection_area
      calculate:
        - area
      decimalPlaces:
        intersection_area: 0
        area: 0
- name: Grünfläche Input from source
  shapeFile: "Öffentlich Planungsbüro Schulz/Projekte/22-20 Maxsolar - Waren, Grabowhöfe/GIS/input/grünfläche_input_from_source_pl.shp"
- name: Grünfläche Input
  shapeFile: "Öffentlich Planungsbüro Schulz/Projekte/22-20 Maxsolar - Waren, Grabowhöfe/GIS/input/grünfläche_input.shp"
- name: Moor
  # updateDxf: true
  shapeFile: "Öffentlich Planungsbüro Schulz/Projekte/22-20 Maxsolar - Waren, Grabowhöfe/GIS/input/moor.shp"
- name: "ges gesch Biotope"
  # updateDxf: true
  shapeFile: "Öffentlich Planungsbüro Schulz/Projekte/22-20 Maxsolar - Waren, Grabowhöfe/GIS/input/ges. geschützte Biotope.shp"
- name: Graben
  shapeFile: "Öffentlich Planungsbüro Schulz/Projekte/22-20 Maxsolar - Waren, Grabowhöfe/GIS/input/graben_pl.shp"
- name: Grünfläche
  updateDxf: true
  # style:
  #   layer:
  #     color: "blue"
  operations:
    - type: copy
      layers:
        - "Grünfläche Input from source"
        - "Grünfläche Input"
        # - Baum_Laubbaum Envelope
        # - Baum_Laubbaum Buffer
        - Moor
        - "ges gesch Biotope"
        - "Gas_HD_LEIT Buffer"
        - Leitung Ontras Gas Buffer
    - type: dissolve
    - type: intersection
      layers:
        - Geltungsbereich
    - type: dissolve
    - type: filterGeometry
      minArea: 100
      geometryTypes:
        - Polygon
    - type: difference
      reverseDifference: false
      layers:
        - Graben
- name: Ausgleich Grünfläche
  updateDxf: true
  # style:
  #   layer:
  #     color: "chartreuse-medium"
  operations:
    - type: buffer
      layers:
        - Grünfläche
      # distance: -3
      distance: -1
      joinStyle: round
      # skipIslands: true
      preserveIslands: true
- name: Grünfläche Schraffur
  updateDxf: true
  style: grünfläche
  applyHatch:
    layers:
      - Ausgleich Grünfläche
- name: Ausgleich Schutzflächeumgrenzung
  updateDxf: true
  # style:
  #   layer:
  #     color: "yellow-medium"
  operations:
    - type: copy
      layers:
        - Grünfläche
    - type: difference
      layers:
        - Ausgleich Grünfläche
- name: Grünfläche T-Linie Symbol Schraffur
  updateDxf: true
  style: schutzflächeumgrenzung
  applyHatch:
    layers:
      - Ausgleich Schutzflächeumgrenzung
- name: Baufeld
  updateDxf: true
  close: true
  operations:
    - type: copy
      layers:
        - Geltungsbereich
    - type: difference
      useBufferTrick: true
      reverseDifference: false
      operations:
        - type: dissolve
          layers:
            - Grünfläche
            - Graben
            - Zuwegung
    - type: filterGeometry
      minArea: 200
      geometryTypes:
        - Polygon
- name: Baufeld Schraffur
  updateDxf: true
  style: baufeld
  applyHatch:
    layers:
      - Baufeld
- name: Baugrenze 2
  updateDxf: true
  style: baugrenze_2
  close: true
  operations:
    - type: buffer
      layers:
        - Baugrenze
      distance: -0.4
- name: Baugrenze
  updateDxf: true
  style: baugrenze
  linetypeScale: 0.5
  linetypeGeneration: true
  close: true
  operations:
    - type: buffer
      layers:
        - Baufeld
      distance: -3
    - type: difference
      reverseDifference: false
      layers:
        - Str-Leitungsabschnitt-NS Buffer
        # - Leitung Buffer
        - Stromkabel-MS_unterirdisch_LEIT Buffer
        - Baum_Laubbaum Envelope
        - Baum_Laubbaum Buffer
        - Baugrenze Exclude
        - Exclude Bahn Buffer
        - Exclude Böschung
    # - type: buffer
    #   distance: -6
    # - type: buffer
    #   distance: 6