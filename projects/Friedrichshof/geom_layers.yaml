geomLayers:
  ### Grundlagen ###
  - name: parcel
    # sync: push
    shapeFile: "Öffentlich Planungsbüro Schulz/Projekte/22-16 Maxsolar - Friedrichshof/GIS/input/parcel.shp"

  - name: flur
    shapeFile: "Öffentlich Planungsbüro Schulz/Projekte/22-16 Maxsolar - Friedrichshof/GIS/input/flur.shp"

  - name: gemarkung
    shapeFile: "Öffentlich Planungsbüro Schulz/Projekte/22-16 Maxsolar - Friedrichshof/GIS/input/gemarkung.shp"

  - name: Exclude Geltungsbereich
    # sync: push
    shapeFile: "Öffentlich Planungsbüro Schulz/Projekte/22-16 Maxsolar - Friedrichshof/GIS/input/Exclude Geltungsbereich.shp"

  - name: Geltungsbereich
    sync: push
    shapeFile: "Öffentlich Planungsbüro Schulz/Projekte/22-16 Maxsolar - Friedrichshof/GIS/input/Geltungsbereich input.shp"
    operations:
      - type: difference
        reverseDifference: false
        layers:
          - Exclude Geltungsbereich
      - type: repair
      - type: removeSliversErosion

  - name: Geltungsbereich 2
    sync: push
      # lineweight: 211
    linetypeGeneration: true
    linetypeScale: 30
    style: geltungsbereich_2
    operations:
      - type: copy
        layers:
          - Geltungsbereich
      - type: dissolve
      - type: buffer
        distance: 2
        joinStyle: round
        capStyle: round
      # - type: buffer
      #   distance: -2
      #   joinStyle: mitre
      #   capStyle: flat
      # - type: buffer
      #   distance: 2
      #   joinStyle: mitre
      #   capStyle: flat

  - name: Ablagerungsfläche
    sync: push
    shapeFile: "Öffentlich Planungsbüro Schulz/Projekte/22-16 Maxsolar - Friedrichshof/GIS/input/Ablagerungsfläche.shp"
    operations:
      - type: dissolve

  - name: Ablagerungsfläche Schraffur
    sync: push
    style: ablagerungen
    applyHatch:
      layers:
        - Ablagerungsfläche

  - name: Grünstreifen
    sync: push
    shapeFile: "Öffentlich Planungsbüro Schulz/Projekte/22-16 Maxsolar - Friedrichshof/GIS/input/Grünstreifen.shp"

  - name: "Grünstreifen Schraffur"
    sync: push
    style: grünfläche
    applyHatch:
      layers:
        - "Grünstreifen"


  - name: "Include Ausgleich Schutzflächeumgrenzung"
    # sync: push
    shapeFile: "Öffentlich Planungsbüro Schulz/Projekte/22-16 Maxsolar - Friedrichshof/GIS/input/Include Ausgleich Schutzflächeumgrenzung.shp"

  - name: CEF input
    # sync: push
    shapeFile: "Öffentlich Planungsbüro Schulz/Projekte/22-16 Maxsolar - Friedrichshof/GIS/input/CEF.shp"

  - name: CIO input
    # sync: push
    shapeFile: "Öffentlich Planungsbüro Schulz/Projekte/22-16 Maxsolar - Friedrichshof/GIS/input/GIO - Intensivgrünland auf Moorstandorten.shp"

  - name: ACL - Lehm- bzw. Tonacker
    # sync: push
    shapeFile: "Öffentlich Planungsbüro Schulz/Projekte/22-16 Maxsolar - Friedrichshof/GIS/input/ACL - Lehm- bzw. Tonacker.shp"
    operations:
      - type: intersection
        layers:
          - Geltungsbereich

  - name: ges. gesch. Biotope
    # sync: push
    shapeFile: "Öffentlich Planungsbüro Schulz/Projekte/22-16 Maxsolar - Friedrichshof/GIS/input/ges. gesch. Biotope.shp"



  - name: Baumreihe Linie
    sync: pull

  - name: Baum Puffer
    operations:
      - type: buffer
        layers:
          - Baumreihe Linie
        distance: 6

  - name: Baufeld
    sync: push
    # shapeFile: "Öffentlich Planungsbüro Schulz/Projekte/22-16 Maxsolar - Friedrichshof/GIS/input/Baufeld input.shp"
    operations:
      - type: copy
        layers:
          - Geltungsbereich
      - type: difference
        reverseDifference: false
        layers:
          - Ablagerungsfläche
          - Grünstreifen
          - "ges. gesch. Biotope Puffer Ring"
          - "Ablagerungsfläche Puffer Ring"
          - "Ausgleich Grünfläche"
          - "Ausgleich Schutzflächeumgrenzung"
      - type: dissolve
      - type: filterGeometry
        geometryTypes:
          - Polygon

  - name: CEF Biotop
    operations:
      - type: copy
        layers:
          - name: "CEF input"
      - type: difference
        reverseDifference: false
        layers:
          - name: "CIO input"

  - name: Baufeld Schraffur
    sync: push
    style: baufeld
    applyHatch:
      layers:
        - Baufeld

  - name: Baugrenze
    sync: push
    style: baugrenze
    linetypeScale: 0.5
    linetypeGeneration: true
    close: true
    operations:
      - type: buffer
        joinStyle: mitre
        layers:
          - Baufeld
        distance: -3
      - type: difference
        reverseDifference: false
        layers:
          - Baum Puffer

  - name: Baugrenze 2
    sync: push
    style: baugrenze_2
    close: true
    operations:
      - type: buffer
        joinStyle: mitre
        layers:
          - Baugrenze
        distance: -0.4

  ### Reports ###
  - name: "Grünstreifen Report"
    operations:
      - type: copy
        layers:
          - Grünstreifen
      - type: calculate
        calculations:
          - type: area
            as: area
            decimalPlaces: 0
          - type: perimeter
            as: perimeter
            decimalPlaces: 1
      - type: report
        outputFile: "Öffentlich Planungsbüro Schulz/Projekte/22-16 Maxsolar - Friedrichshof/GIS/reports/gruenstreifen_report.json"
        featureColumns:
          - area
          - perimeter
        calculate:
          - area
          - perimeter
        decimalPlaces:
          area: 0
          perimeter: 1

  - name: "CEF input Report"
    operations:
      - type: copy
        layers:
          - CEF input
      - type: calculate
        calculations:
          - type: area
            as: area
            decimalPlaces: 0
          - type: perimeter
            as: perimeter
            decimalPlaces: 1
      - type: report
        outputFile: "Öffentlich Planungsbüro Schulz/Projekte/22-16 Maxsolar - Friedrichshof/GIS/reports/cef_input_report.json"
        featureColumns:
          - area
          - perimeter
        calculate:
          - area
          - perimeter
        decimalPlaces:
          area: 0
          perimeter: 1

  - name: "Ablagerungsfläche Report"
    operations:
      - type: copy
        layers:
          - Ablagerungsfläche
      - type: calculate
        calculations:
          - type: area
            as: area
            decimalPlaces: 0
          - type: perimeter
            as: perimeter
            decimalPlaces: 1
      - type: report
        outputFile: "Öffentlich Planungsbüro Schulz/Projekte/22-16 Maxsolar - Friedrichshof/GIS/reports/ablagerungsflaeche_report.json"
        featureColumns:
          - area
          - perimeter
        calculate:
          - area
          - perimeter
        decimalPlaces:
          area: 0
          perimeter: 1

  - name: "ges. gesch. Biotope Report"
    operations:
      - type: copy
        layers:
          - "ges. gesch. Biotope"
      - type: calculate
        calculations:
          - type: area
            as: area
            decimalPlaces: 0
          - type: perimeter
            as: perimeter
            decimalPlaces: 1
      - type: report
        outputFile: "Öffentlich Planungsbüro Schulz/Projekte/22-16 Maxsolar - Friedrichshof/GIS/reports/ges_gesch_biotope_report.json"
        featureColumns:
          - area
          - perimeter
        calculate:
          - area
          - perimeter
        decimalPlaces:
          area: 0
          perimeter: 1

  - name: "ges. gesch. Biotope Puffer Ring Report"
    operations:
      - type: copy
        layers:
          - "ges. gesch. Biotope Puffer Ring"
      - type: calculate
        calculations:
          - type: area
            as: area
            decimalPlaces: 0
          - type: perimeter
            as: perimeter
            decimalPlaces: 1
      - type: report
        outputFile: "Öffentlich Planungsbüro Schulz/Projekte/22-16 Maxsolar - Friedrichshof/GIS/reports/ges_gesch_biotope_puffer_ring_report.json"
        featureColumns:
          - area
          - perimeter
        calculate:
          - area
          - perimeter
        decimalPlaces:
          area: 0
          perimeter: 1

  - name: "Ablagerungsfläche Puffer Ring Report"
    operations:
      - type: copy
        layers:
          - "Ablagerungsfläche Puffer Ring"
      - type: calculate
        calculations:
          - type: area
            as: area
            decimalPlaces: 0
          - type: perimeter
            as: perimeter
            decimalPlaces: 1
      - type: report
        outputFile: "Öffentlich Planungsbüro Schulz/Projekte/22-16 Maxsolar - Friedrichshof/GIS/reports/ablagerungsflaeche_puffer_ring_report.json"
        featureColumns:
          - area
          - perimeter
        calculate:
          - area
          - perimeter
        decimalPlaces:
          area: 0
          perimeter: 1



  - name: "Baugrenze Report"
    operations:
      - type: copy
        layers:
          - Baugrenze
      - type: calculate
        calculations:
          - type: area
            as: area
            decimalPlaces: 0
          - type: perimeter
            as: perimeter
            decimalPlaces: 1
      - type: report
        outputFile: "Öffentlich Planungsbüro Schulz/Projekte/22-16 Maxsolar - Friedrichshof/GIS/reports/baugrenze_report.json"
        featureColumns:
          - area
          - perimeter
        calculate:
          - area
          - perimeter
        decimalPlaces:
          area: 0
          perimeter: 1

  - name: "Baufeldstreifen Report"
    operations:
      - type: copy
        layers:
          - Baufeld
      - type: difference
        reverseDifference: false
        layers:
          - Baugrenze
      - type: calculate
        calculations:
          - type: area
            as: area
            decimalPlaces: 0
          - type: perimeter
            as: perimeter
            decimalPlaces: 1
      - type: report
        outputFile: "Öffentlich Planungsbüro Schulz/Projekte/22-16 Maxsolar - Friedrichshof/GIS/reports/baufeldstreifen_report.json"
        featureColumns:
          - area
          - perimeter
        calculate:
          - area
          - perimeter
        decimalPlaces:
          area: 0
          perimeter: 1

  ### Grünfläche ###
  - name: "Grünfläche Naturschutz"
    # sync: push
    operations:
      - type: dissolve
        layers:
          - name: "CEF input"
          - name: "ges. gesch. Biotope"
          - name: "Include Ausgleich Schutzflächeumgrenzung"
      - type: intersection
        layers:
          - name: Geltungsbereich
      - type: repair
      - type: dissolve
      - type: repair
      - type: removeSliversErosion
        erosionDistance: 0.1
      - type: repair
      - type: filterGeometry
        minArea: 20
        geometryTypes:
          - Polygon


  - name: "ges. gesch. Biotope Puffer Ring"
    sync: push
    operations:
      - type: buffer
        layers:
          - ges. gesch. Biotope
        distance: 5
        mode: ring
      - type: intersection
        layers:
          - name: Geltungsbereich
      - type: difference
        reverseDifference: false
        layers:
          - name: "Grünfläche Naturschutz"
      - type: repair
      - type: removeSliversErosion
      - type: dissolve

  - name: "ges. gesch. Biotope Puffer Ring Schraffur"
    sync: push
    style: grünfläche
    applyHatch:
      layers:
        - "ges. gesch. Biotope Puffer Ring"

  - name: "Ablagerungsfläche Puffer Ring"
    sync: push
    operations:
      - type: buffer
        layers:
          - Ablagerungsfläche
        distance: 5
        mode: ring
      - type: intersection
        layers:
          - name: Geltungsbereich
      - type: difference
        reverseDifference: false
        layers:
          - name: "Grünfläche Naturschutz"
      - type: repair
      - type: dissolve

  - name: "Ablagerungsfläche Puffer Ring Schraffur"
    sync: push
    style: grünfläche
    applyHatch:
      layers:
        - "Ablagerungsfläche Puffer Ring"

  # Create inner green area (buffered inward) for hatching
  - name: "Ausgleich Grünfläche"
    sync: push
    operations:
      - type: copy
        layers:
          - "Grünfläche Naturschutz"
      - type: dissolve
      - type: buffer
        distance: -2
        joinStyle: round
        preserveIslands: true

  - name: "Grünfläche Schraffur"
    sync: push
    style: grünfläche
    applyHatch:
      layers:
        - "Ausgleich Grünfläche"

  # T-Line system for protection area boundaries (ring from original area)
  - name: "Ausgleich Schutzflächeumgrenzung"
    sync: push
    operations:
      - type: copy
        layers:
          - "Grünfläche Naturschutz"
      - type: buffer
        distance: -2
        joinStyle: round
        mode: ring

  - name: "Grünfläche T-Linie Symbol Schraffur"
    sync: push
    style: schutzflächeumgrenzung
    applyHatch:
      layers:
        - "Ausgleich Schutzflächeumgrenzung"

  - name: Parcel Intersections
    operations:
      - type: copy
        layers:
          - name: parcel
      - type: calculate
        calculations:
          - type: area
            as: parcel_area
            decimalPlaces: 0
      - type: intersection
        layers:
          - name: Geltungsbereich
      - type: filterGeometry
        minArea: 10
        geometryTypes:
          - polygon
      - type: calculate
        calculations:
          - type: area
            as: intersection_area
            decimalPlaces: 0
      - type: report
        outputFile: "Öffentlich Planungsbüro Schulz/Projekte/22-16 Maxsolar - Friedrichshof/GIS/reports/parcel_intersections_report.json"
        featureColumns:
          - label
          - parcel_area
          - intersection_area
        calculate:
          - area
        decimalPlaces:
          intersection_area: 0
          area: 0


  - name: ges. gesch. Biotope 2
    sync: push
    style: gesGeschuetzesBiotop
    linetypeGeneration: true
    operations:
      - type: buffer
        distance: -1
        layers:
          - name: "ges. gesch. Biotope"

  - name: CEF input 2
    sync: push
    style: cef
    linetypeGeneration: true
    operations:
      - type: buffer
        distance: -1
        layers:
          - name: "CEF input"
