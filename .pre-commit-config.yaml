repos:
  - repo: https://github.com/pre-commit/pre-commit-hooks
    rev: v4.5.0
    hooks:
      - id: trailing-whitespace
      - id: end-of-file-fixer
      - id: check-yaml
      - id: check-added-large-files
      - id: debug-statements
      - id: check-ast
      - id: check-json
      - id: check-merge-conflict
      - id: detect-private-key

  - repo: https://github.com/pycqa/flake8
    rev: 7.0.0
    hooks:
      - id: flake8
        additional_dependencies:
          - flake8-docstrings==1.7.0
          - flake8-import-order==0.18.2
          - flake8-quotes==3.4.0
          - flake8-bugbear==24.2.6
          - flake8-pyproject==1.2.3
        args:
          - "--toml-config=pyproject.toml"

  - repo: https://github.com/pycqa/isort
    rev: 5.13.2
    hooks:
      - id: isort
        args: ["--settings-path=pyproject.toml"]

  - repo: https://github.com/psf/black
    rev: 24.1.1
    hooks:
      - id: black
        args: ["--config=pyproject.toml"]
        language_version: python3

  - repo: https://github.com/pre-commit/mirrors-mypy
    rev: v1.8.0
    hooks:
      - id: mypy
        args: ["--config-file=pyproject.toml"]
        exclude: ^src_old/
        additional_dependencies:
          - types-setuptools==75.8.0.20250210
          - types-PyYAML==6.0.12
          - numpy>=1.26.0

  - repo: https://github.com/pycqa/pylint
    rev: v3.0.3
    hooks:
      - id: pylint
        name: pylint (source)
        args:
          - "--rcfile=pyproject.toml"
        exclude: ^(tests/|src_old/)
        additional_dependencies:
          - shapely==2.0.4
          - ezdxf==1.3.1
          - geopandas==0.14.3
          - matplotlib==3.8.3
          - OWSLib==0.29.3
          - PyYAML==6.0.1
          - pytest==8.0.0
          - types-PyYAML==6.0.12
      - id: pylint
        name: pylint (tests)
        args:
          - "--rcfile=pyproject.toml"
          - "--disable=missing-docstring,redefined-outer-name,protected-access,unused-argument,unused-variable,duplicate-code,wrong-import-position,unnecessary-lambda,unspecified-encoding,unsupported-membership-test,use-implicit-booleaness-not-comparison,import-outside-toplevel,no-member,unexpected-keyword-arg,no-value-for-parameter,function-redefined,unused-import,invalid-sequence-index,too-many-statements"
        files: ^tests/
        additional_dependencies:
          - shapely==2.0.4
          - ezdxf==1.3.1
          - geopandas==0.14.3
          - matplotlib==3.8.3
          - OWSLib==0.29.3
          - PyYAML==6.0.1
          - pytest==8.0.0
          - types-PyYAML==6.0.12

  # Enhanced duplicate code checker
  - repo: https://github.com/jendrikseipp/vulture
    rev: v2.11
    hooks:
      - id: vulture
        name: vulture (dead code and duplicates)
        args:
          - "src"
          - "--min-confidence=90"
          - "--exclude=tests/,src_old/"
          - "--ignore-names=config_path,geometry_path,layer_path,target_path,format"

  # Semantic duplicate checker
  - repo: local
    hooks:
      - id: check-semantic-duplicates
        name: Check for semantically similar implementations
        entry: python scripts/check_semantic_duplicates.py
        language: python
        types: [python]
        exclude: ^(tests/|src_old/)

  # Enhanced type checker for duplicates
  - repo: local
    hooks:
      - id: check-duplicate-types
        name: Check for duplicate type definitions and similar implementations
        entry: python scripts/check_duplicate_types.py
        language: python
        types: [python]
        pass_filenames: false

  # Dependency injection and implementation pattern checker
  - repo: local
    hooks:
      - id: check-dependency-injection
        name: Check Dependency Injection Patterns
        entry: python scripts/check_dependency_injection.py
        language: python
        types: [python]
        exclude: ^(tests/|src/.*/dependencies\.py|src/.*/__init__\.py)

  # Import rules checker
  - repo: local
    hooks:
      - id: check-import-rules
        name: Check Import Rules
        entry: python scripts/check_import_rules.py
        language: system
        types: [python]
        pass_filenames: true

  # Code complexity and similarity checker
  - repo: local
    hooks:
      - id: check-code-complexity
        name: Check Code Complexity and Similarity
        entry: radon cc -n A -s --total-average
        language: system
        types: [python]
        exclude: ^(tests/|src_old/|scripts/)
      - id: check-maintainability-index
        name: Check Code Maintainability
        entry: radon mi -n A -s
        language: system
        types: [python]
        exclude: ^(tests/|src_old/|scripts/)
