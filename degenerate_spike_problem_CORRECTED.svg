<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 600" width="800" height="600">
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#FF0000"/>
    </marker>
  </defs>
  
  <!-- Title -->
  <text x="400" y="30" font-size="24" font-weight="bold" text-anchor="middle" fill="#000">
    ACTUAL Problem: INWARD Zero-Width Spike
  </text>
  
  <!-- ========== LEFT: NORMAL POLYGON ========== -->
  <g id="normal-polygon">
    <text x="150" y="70" font-size="18" font-weight="bold" text-anchor="middle" fill="#000">
      Normal Polygon
    </text>
    
    <!-- Normal polygon shape -->
    <polygon points="50,100 250,100 250,350 50,350" 
             fill="#90EE90" stroke="#006400" stroke-width="3"/>
    
    <!-- Vertices -->
    <circle cx="50" cy="100" r="5" fill="#FF0000"/>
    <circle cx="250" cy="100" r="5" fill="#FF0000"/>
    <circle cx="250" cy="350" r="5" fill="#FF0000"/>
    <circle cx="50" cy="350" r="5" fill="#FF0000"/>
    
    <!-- Labels -->
    <text x="40" y="95" font-size="14" font-weight="bold" fill="#FF0000">A</text>
    <text x="260" y="95" font-size="14" font-weight="bold" fill="#FF0000">B</text>
    <text x="260" y="360" font-size="14" font-weight="bold" fill="#FF0000">C</text>
    <text x="40" y="360" font-size="14" font-weight="bold" fill="#FF0000">D</text>
    
    <text x="150" y="400" font-size="14" text-anchor="middle" fill="#006400">
      ✓ Clean boundary
    </text>
    <text x="150" y="420" font-size="14" text-anchor="middle" fill="#006400">
      ✓ Each vertex appears once
    </text>
  </g>
  
  <!-- ========== RIGHT: DEGENERATE INWARD SPIKE ========== -->
  <g id="degenerate-spike">
    <text x="550" y="70" font-size="18" font-weight="bold" text-anchor="middle" fill="#000">
      Polygon with INWARD Zero-Width Spike
    </text>
    
    <!-- Polygon with INWARD spike -->
    <path d="M 450,100 L 650,100 L 650,200 L 550,200 L 550,200 L 650,200 L 650,350 L 450,350 Z"
          fill="#FFB6C1" stroke="#8B0000" stroke-width="3"/>
    
    <!-- Highlight the spike area (inward notch) -->
    <rect x="545" y="195" width="110" height="10" fill="#FF0000" opacity="0.3"/>
    
    <!-- Show the inward spike more clearly -->
    <line x1="650" y1="150" x2="550" y2="200" stroke="#0000FF" stroke-width="2" stroke-dasharray="5,5"/>
    <line x1="550" y1="200" x2="650" y2="250" stroke="#00FF00" stroke-width="2" stroke-dasharray="5,5"/>
    
    <!-- Vertices -->
    <circle cx="450" cy="100" r="5" fill="#FF0000"/>
    <circle cx="650" cy="100" r="5" fill="#FF0000"/>
    <circle cx="650" cy="200" r="5" fill="#FF0000"/>
    <circle cx="550" cy="200" r="8" fill="#FF0000" stroke="#000" stroke-width="3"/>
    <text x="560" y="205" font-size="10" font-weight="bold" fill="#FFF">D=E</text>
    <circle cx="650" cy="200" r="5" fill="#FF0000"/>
    <circle cx="650" cy="350" r="5" fill="#FF0000"/>
    <circle cx="450" cy="350" r="5" fill="#FF0000"/>
    
    <!-- Labels -->
    <text x="440" y="95" font-size="14" font-weight="bold" fill="#FF0000">A</text>
    <text x="660" y="95" font-size="14" font-weight="bold" fill="#FF0000">B</text>
    <text x="660" y="195" font-size="14" fill="#FF0000">C</text>
    <text x="535" y="195" font-size="14" font-weight="bold" fill="#FF0000">D/E</text>
    <text x="660" y="210" font-size="14" fill="#FF0000">F</text>
    <text x="660" y="360" font-size="14" font-weight="bold" fill="#FF0000">G</text>
    <text x="440" y="360" font-size="14" font-weight="bold" fill="#FF0000">H</text>
    
    <!-- Arrows showing the path -->
    <text x="595" y="185" font-size="12" fill="#0000FF" text-anchor="middle" font-weight="bold">→ IN</text>
    <text x="595" y="220" font-size="12" fill="#00FF00" text-anchor="middle" font-weight="bold">← BACK</text>
    
    <!-- Problem indicators -->
    <text x="550" y="400" font-size="14" text-anchor="middle" fill="#8B0000">
      ✗ Edge goes INWARD: C→D
    </text>
    <text x="550" y="420" font-size="14" text-anchor="middle" fill="#8B0000">
      ✗ Then immediately: D→F (same as E→F)
    </text>
    <text x="550" y="440" font-size="14" text-anchor="middle" fill="#8B0000" font-weight="bold">
      ✗ D appears TWICE in vertex list!
    </text>
    <text x="550" y="460" font-size="14" text-anchor="middle" fill="#8B0000" font-weight="bold">
      ✗ Creates zero-width inward spike
    </text>
  </g>
  
  <!-- ========== BOTTOM: VERTEX SEQUENCE ========== -->
  <g id="vertex-sequence">
    <text x="400" y="510" font-size="18" font-weight="bold" text-anchor="middle" fill="#000">
      Vertex Coordinate Sequence
    </text>
    
    <!-- Show the vertex sequence -->
    <rect x="50" y="520" width="700" height="60" fill="#F0F0F0" stroke="#000" stroke-width="2"/>
    
    <!-- Normal sequence -->
    <text x="60" y="540" font-size="12" font-weight="bold" fill="#006400">NORMAL:</text>
    <text x="60" y="555" font-size="11" fill="#006400" font-family="monospace">
      A(450,100) → B(650,100) → C(650,200) → F(650,300) → G(650,350) → H(450,350) → A
    </text>
    
    <!-- Problem sequence -->
    <text x="60" y="555" font-size="12" font-weight="bold" fill="#8B0000">PROBLEM:</text>
    <text x="60" y="570" font-size="11" fill="#8B0000" font-family="monospace">
      A(450,100) → B(650,100) → C(650,200) → D(550,200) → 
    </text>
    <text x="60" y="570" font-size="11" fill="#FF0000" font-family="monospace" font-weight="bold">
      _______________________________________________E(550,200)
    </text>
    <text x="395" y="570" font-size="11" fill="#8B0000" font-family="monospace">
       → F(650,200)...
    </text>
    
    <text x="400" y="575" font-size="10" text-anchor="middle" fill="#FF0000" font-weight="bold">
      ↑ D and E are THE SAME VERTEX (550,200) - appears TWICE consecutively!
    </text>
  </g>
</svg>

